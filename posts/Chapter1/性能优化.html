<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <title>性能优化 | 面试API</title>
    <meta name="description" content="前端面试API，自检清单，公众号推荐" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="性能优化 | 面试API" />
    <meta property="og:site_name" content="性能优化 | 面试API" />
    <meta property="og:locale" content="zh-CN" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="性能优化 | 面试API" />
    <link rel="shortut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.5f1fa08a.css" as="style"><link rel="preload" href="/assets/js/app.e48c3d44.js" as="script"><link rel="preload" href="/assets/js/1.9aa2b147.js" as="script"><link rel="preload" href="/assets/js/6.ab6f709e.js" as="script"><link rel="preload" href="/assets/js/5.0f5d195d.js" as="script"><link rel="preload" href="/assets/js/8.b943e6ee.js" as="script"><link rel="preload" href="/assets/js/11.fb958432.js" as="script"><link rel="preload" href="/assets/js/7.a46ab4a3.js" as="script"><link rel="preload" href="/assets/js/33.bc58239e.js" as="script"><link rel="preload" href="/assets/js/16.f738196f.js" as="script"><link rel="prefetch" href="/assets/js/10.175139c9.js"><link rel="prefetch" href="/assets/js/12.85f229b3.js"><link rel="prefetch" href="/assets/js/13.96b776c5.js"><link rel="prefetch" href="/assets/js/14.e8a31a31.js"><link rel="prefetch" href="/assets/js/15.79c8d111.js"><link rel="prefetch" href="/assets/js/17.c9beec15.js"><link rel="prefetch" href="/assets/js/18.311c5248.js"><link rel="prefetch" href="/assets/js/19.6a1d7086.js"><link rel="prefetch" href="/assets/js/20.3e55f9ce.js"><link rel="prefetch" href="/assets/js/21.8d277f89.js"><link rel="prefetch" href="/assets/js/22.d1bd9642.js"><link rel="prefetch" href="/assets/js/23.7db4a8c3.js"><link rel="prefetch" href="/assets/js/24.1cb17e4b.js"><link rel="prefetch" href="/assets/js/25.e05bfa14.js"><link rel="prefetch" href="/assets/js/26.66417429.js"><link rel="prefetch" href="/assets/js/27.e37ba2d1.js"><link rel="prefetch" href="/assets/js/28.9981806c.js"><link rel="prefetch" href="/assets/js/29.0afdd99a.js"><link rel="prefetch" href="/assets/js/30.d9df9218.js"><link rel="prefetch" href="/assets/js/31.9f122e57.js"><link rel="prefetch" href="/assets/js/32.3be6e805.js"><link rel="prefetch" href="/assets/js/34.5b4ce795.js"><link rel="prefetch" href="/assets/js/35.d5108ab9.js"><link rel="prefetch" href="/assets/js/36.6b511d0c.js"><link rel="prefetch" href="/assets/js/37.94b94dfb.js"><link rel="prefetch" href="/assets/js/38.d1f5520c.js"><link rel="prefetch" href="/assets/js/39.f4548d5d.js"><link rel="prefetch" href="/assets/js/4.2b5d276e.js"><link rel="prefetch" href="/assets/js/40.81df4ece.js"><link rel="prefetch" href="/assets/js/41.5c15cc5a.js"><link rel="prefetch" href="/assets/js/42.94194640.js"><link rel="prefetch" href="/assets/js/43.f7be967b.js"><link rel="prefetch" href="/assets/js/44.b7364342.js"><link rel="prefetch" href="/assets/js/45.a5be72ef.js"><link rel="prefetch" href="/assets/js/46.5dd241ea.js"><link rel="prefetch" href="/assets/js/47.d59f707a.js"><link rel="prefetch" href="/assets/js/48.866defb6.js"><link rel="prefetch" href="/assets/js/49.98fdaefc.js"><link rel="prefetch" href="/assets/js/50.3e139586.js"><link rel="prefetch" href="/assets/js/51.3fcba8e1.js"><link rel="prefetch" href="/assets/js/52.651a2d94.js"><link rel="prefetch" href="/assets/js/53.892cbb93.js"><link rel="prefetch" href="/assets/js/54.32e1b9ce.js"><link rel="prefetch" href="/assets/js/55.2db2bfa6.js"><link rel="prefetch" href="/assets/js/56.1ac7678c.js"><link rel="prefetch" href="/assets/js/57.f744e726.js"><link rel="prefetch" href="/assets/js/58.0b48a602.js"><link rel="prefetch" href="/assets/js/59.6fd53a34.js"><link rel="prefetch" href="/assets/js/60.93edb351.js"><link rel="prefetch" href="/assets/js/61.1c5d6435.js"><link rel="prefetch" href="/assets/js/62.04e9e017.js"><link rel="prefetch" href="/assets/js/63.456f3577.js"><link rel="prefetch" href="/assets/js/64.a1c8d614.js"><link rel="prefetch" href="/assets/js/65.549a8c78.js"><link rel="prefetch" href="/assets/js/66.81658fbf.js"><link rel="prefetch" href="/assets/js/67.a7e6e80a.js"><link rel="prefetch" href="/assets/js/68.f119f6cf.js"><link rel="prefetch" href="/assets/js/69.79ea2aba.js"><link rel="prefetch" href="/assets/js/70.92112509.js"><link rel="prefetch" href="/assets/js/9.ba7c49dc.js"><link rel="prefetch" href="/assets/js/search.29d23745.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5f1fa08a.css">
  </head>
  <body>
    <div id="loader-wrapper" style="display: none;opacity:0">
      <div id="loader"></div>
      <div class="loader-section section-left"></div>
      <div class="loader-section section-right"></div>
    </div>
    <div id="app" data-server-rendered="true"><div data-v-8ae45032><section class="el-container" data-v-8ae45032><aside width="200px" class="el-aside menu" style="width:auto;" data-v-28ba16cc data-v-8ae45032><div class="brand-wrap" style="background-image:url(/aside.jpg);" data-v-28ba16cc><div class="brand" data-v-28ba16cc><a href="/" class="avatar waves-effect waves-circle waves-light router-link-active" data-v-28ba16cc><img src="/infoq1.png" data-v-28ba16cc></a> <hgroup class="introduce" data-v-28ba16cc><div class="nickname" data-v-28ba16cc><img src="/name.png" data-v-28ba16cc></div> <div data-v-28ba16cc><a title="253929992@qq.com" class="mail" data-v-28ba16cc>253929992@qq.com</a></div></hgroup></div></div> <ul role="menubar" class="menu-wrap el-menu" style="background-color:;" data-v-28ba16cc><li role="menuitem" aria-haspopup="true" aria-expanded="true" class="el-submenu is-opened" data-v-28ba16cc><div class="el-submenu__title" style="padding-left:20px;color:;background-color:;"><i class="iconfont icon-icon37" data-v-28ba16cc></i> <span slot="title" class="item-title" data-v-28ba16cc>自检清单</span><i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><ul role="menu" class="el-menu el-menu--inline" style="background-color:;"> <li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            JS基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            HTML&amp;CSS
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            计算机基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            数据结构和算法
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            运行环境
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            框架
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            工程化
          </span></li></ul></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-shijianzhou" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        时间轴
      </span></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-guanyu" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        个人档案
      </span></li></ul></aside> <section class="el-container container-warp" data-v-8ae45032><header id="topHeader" class="el-header top-header" style="height:60px;padding-left:300px;" data-v-7e316482 data-v-8ae45032><div class="header-warp el-row is-align-center el-row--flex" data-v-7e316482><div class="el-col el-col-2 el-col-xs-7" data-v-7e316482><button type="button" class="el-button header-btn el-button--primary el-button--mini is-circle" data-v-7e316482><!----><!----><span><i class="iconfont icon-rightjustified" data-v-7e316482></i></span></button></div> <div class="el-col el-col-10 el-col-xs-24" data-v-7e316482><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-2097" class="el-autocomplete search-input" data-v-7e316482><div class="el-input el-input--small el-input--suffix"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="search-popper" placeholder="搜搜看" fetchSuggestions="function () { [native code] }" debounce="300" placement="bottom-start" popperAppendToBody="true" value="" class="el-input__inner"><!----><span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-input__icon el-icon-search search-ico" data-v-7e316482></i><!----></span><!----></span><!----></div><div role="region" class="el-autocomplete-suggestion el-popper search-popper" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div class="nav-col el-col el-col-8 el-col-offset-10 el-col-xs-24" data-v-7e316482><ul role="menubar" class="header-menu el-menu--horizontal el-menu" style="background-color:transparent;" data-v-7e316482><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:#fdf5ab;border-bottom-color:transparent;background-color:transparent;" data-v-7e316482>Home</li><li role="menuitem" tabindex="-1" class="el-menu-item is-active" style="color:#ffd04b;border-bottom-color:#ffd04b;background-color:transparent;" data-v-7e316482>Blog</li></ul></div></div></header> <main class="el-main my-main" style="margin-left:238px;" data-v-47f536a8 data-v-8ae45032><div class="content-header index-header" style="background-image:url(/banner.jpg);" data-v-1ba67baf data-v-47f536a8><div class="container" data-v-1ba67baf><h1 id="conentHeader" class="title animated fadeInDown" data-v-1ba67baf>性能优化</h1> <h5 class="subtitle" data-v-1ba67baf>最后更新时间：2019-12-04 14:39:50</h5> <div class="el-row is-align-center el-row--flex" data-v-47f536a8><div class="tag-card el-col el-col-20 el-col-xs-23 el-col-sm-22 el-col-md-22 el-col-lg-20" data-v-47f536a8><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>AST抽象语法树</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>网络协议</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>工具函数</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>vue生命周期</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>性能优化</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>闭包</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编译原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS渲染原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>回流与重绘</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>判断数据类型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>this</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>执行上下文</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>高阶函数</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>浏览器缓存</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>HTML汇总</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>BFC</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue组件通信</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS盒模型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS伪类</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>垂直居中</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS选择器</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>三栏布局</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>实现轮子</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据结构</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>算法</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>TypeScript</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>项目构建</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>版本控制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>持续集成</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>开发提速</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据流管理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Nginx</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编码能力</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>React</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>异常处理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>基础问题</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>作用域</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>执行机制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>正则表达式</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>类型转换</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Symbol</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>原型和原型链</span></div></div></div></div> <div data-v-3a18dd0a data-v-47f536a8 data-v-47f536a8><div class="post-content el-row is-justify-center el-row--flex" data-v-3a18dd0a><div id="post-card" class="post-card post-sign el-col el-col-16 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a><div class="content__default" data-v-3a18dd0a><h1 id="网站优化实践"><a href="#网站优化实践" aria-hidden="true" class="header-anchor">#</a> 网站优化实践</h1> <p>转载自: <a href="http://jartto.wang/2019/02/16/web-optimization/" target="_blank" rel="noopener noreferrer">Jartto's blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>网站优化是前端开发的重中之重，但是优化细节却十分繁杂，没有好的思路，优化很难高效的开展。</p> <p>本文将以实际网站来做参考，手把手教你如何一步步做好网站优化。</p> <p>这不是一篇 <strong>基础网站优化</strong> 文章，继续下文前，请确定已经做了如下基本优化：</p> <ol><li>图片压缩、合并</li> <li>代码精简、混淆</li> <li>减少 <code>iframe</code> 使用</li> <li>避免图片 <code>src</code> 为空</li> <li>减少 <code>HTTP</code> 请求数</li> <li>避免重定向</li> <li>样式表放页头、脚本放底部</li> <li>…</li></ol> <h2 id="优化的意义"><a href="#优化的意义" aria-hidden="true" class="header-anchor">#</a> 优化的意义</h2> <p>我们可以从两个角度来看这个问题：</p> <ol><li><p>用户角度
网站优化能够让页面加载得更快，响应更加及时，极大提升用户体验。</p></li> <li><p>服务商角度
优化会减少页面资源请求数，减小请求资源所占带宽大小，从而节省可观的带宽资源。</p></li></ol> <blockquote><p>网站优化的目标是：减少网站加载时间，提高响应速度。</p></blockquote> <p>那么网站加载速度和用户体验又有着怎样的关系呢？我们来看下面这张图：</p> <p><img src="https://qiniu.mdnice.com/390751f871d33b0b206be13880926119.png" alt="性能优化"></p> <p>Google 和亚马逊的研究表明，Google 页面加载的时间从 <code>0.4</code> 秒提升到 <code>0.9</code> 秒导致丢失了 <code>20%</code> 流量和广告收入，对于亚马逊，页面加载时间每增加 <code>100ms</code> 就意味着 <code>1%</code> 的销售额损失。</p> <blockquote><p>可见，页面的加载速度对于用户有着至关重要的影响。</p></blockquote> <p>一个好的交互效果可能是这样的：</p> <p><img src="https://qiniu.mdnice.com/1a3a8cd970c4e1fa5c8e82740d12399c.png" alt="性能优化"></p> <h2 id="分析网站性能瓶颈"><a href="#分析网站性能瓶颈" aria-hidden="true" class="header-anchor">#</a> 分析网站性能瓶颈</h2> <h5 id="_1-打包文件大小"><a href="#_1-打包文件大小" aria-hidden="true" class="header-anchor">#</a> 1. 打包文件大小</h5> <p><img src="https://qiniu.mdnice.com/f6ca4e1ea0641ffeb15660a121aa5383.png" alt=""></p> <h5 id="_2-打包文件目录"><a href="#_2-打包文件目录" aria-hidden="true" class="header-anchor">#</a> 2. 打包文件目录</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>.
├── favicon.ico
├── index.html
├── manifest.json
├── static
│   ├── DIN-Medium.1bbe3460.otf
│   ├── DIN-Regular.799221d7.otf
│   └── logo.c57d38d0.png
├── umi.css
├── umi.css.map
├── umi.js
└── umi.js.map
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>需要注意：生产环境不要开启 SOURCEMAP</p></blockquote> <h5 id="_3-静态资源加载时间"><a href="#_3-静态资源加载时间" aria-hidden="true" class="header-anchor">#</a> 3. 静态资源加载时间</h5> <p><img src="https://qiniu.mdnice.com/83d7b1fd4f07630355fcf448be5c0e18.png" alt=""></p> <h5 id="_4-资源瀑布-waterfall"><a href="#_4-资源瀑布-waterfall" aria-hidden="true" class="header-anchor">#</a> 4. 资源瀑布 <code>Waterfall</code></h5> <p><img src="https://qiniu.mdnice.com/b789eb64bf23ae483ae1f745b0fa1cf9.png" alt="waterfall"></p> <p><code>TTFB</code> 全称 <code>Time To First Byte</code>：是指<strong>网络请求被发起到从服务器接收到第一个字节的这段时间</strong>，它包含了 <code>TCP</code> 连接时间、发送 <code>HTTP</code> 请求时间和获得响应消息第一个字节的时间。</p> <blockquote><p>Content Download：即下载内容所需要的时间。</p></blockquote> <p>页面一接口情况：</p> <p><img src="https://qiniu.mdnice.com/8e870ed1f77dd3379517dd374845d5a3.png" alt=""></p> <p>页面二接口情况：</p> <p><img src="https://qiniu.mdnice.com/b87c0ac96e784b75e524fd1e07816651.png" alt=""></p> <p>用户下载内容所需要的时间，受限于服务器的资源、资源的大小以及用户的网络速度。因此，我们暂时不讨论这方面的内容。</p> <h6 id="_5-分析工具"><a href="#_5-分析工具" aria-hidden="true" class="header-anchor">#</a> 5. 分析工具</h6> <p>通过 <code>webpack</code> 打包，分析一下大文件构成。</p> <p><img src="https://qiniu.mdnice.com/ae512be364e295fc08b74be6dbd285da.png" alt=""></p> <p>6.<code>YSlo</code>w 或者 <code>PageSpeed</code></p> <p>我们可以通过 <code>Google PageSpeed Insights API Extension</code> 来对网站整体性能 做一下评估，按照建议去做一些高效优化。</p> <p>加载时间概况：</p> <p><img src="https://qiniu.mdnice.com/4bbb11f789c681d925a05d35e250248c.png" alt=""></p> <p>影响网站加载因素：</p> <p><img src="https://qiniu.mdnice.com/d99888202d6deb3cb2e081c739c3c750.png" alt=""></p> <p>缓存策略问题：</p> <p><img src="https://qiniu.mdnice.com/3b5ca6726c09238eb0dbf3764b35f040.png" alt=""></p> <p>DOM 节点：</p> <p><img src="https://qiniu.mdnice.com/f8eb467c5249c3571f019255d404cb05.png" alt=""></p> <p>关键路径：</p> <p><img src="https://qiniu.mdnice.com/24fc24c0cc8b0ed9010de7a0bff22e3a.png" alt=""></p> <p>主线程情况：</p> <p><img src="https://qiniu.mdnice.com/f0e853684275c330497b63ffbefee85c.png" alt=""></p> <h2 id="通过策略解决问题"><a href="#通过策略解决问题" aria-hidden="true" class="header-anchor">#</a> 通过策略解决问题</h2> <h5 id="_1-favicon-ico-404-问题-✓"><a href="#_1-favicon-ico-404-问题-✓" aria-hidden="true" class="header-anchor">#</a> 1. favicon.ico 404 问题 ✓</h5> <h5 id="_2-去除调试工具代码-eruda，线上环境是不需要的-✓"><a href="#_2-去除调试工具代码-eruda，线上环境是不需要的-✓" aria-hidden="true" class="header-anchor">#</a> 2. 去除调试工具代码 <code>eruda</code>，线上环境是不需要的 ✓</h5> <h5 id="_3-图片合并或者多个-svg-✓"><a href="#_3-图片合并或者多个-svg-✓" aria-hidden="true" class="header-anchor">#</a> 3. 图片合并或者多个 <code>svg</code> ✓</h5> <p>建议使用 <code>webpack-spritesmith</code>，简单使用如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">SpritesmithPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    src<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        cwd<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/ico'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        glob<span class="token punctuation">:</span> <span class="token string">'*.png'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    target<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        image<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/spritesmith-generated/jartto.png'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        css<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/spritesmith-generated/jartto.styl'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    apiOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        cssImageRef<span class="token punctuation">:</span> <span class="token string">&quot;~jartto.png&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="_4-大文件拆分-✓"><a href="#_4-大文件拆分-✓" aria-hidden="true" class="header-anchor">#</a> 4. 大文件拆分 ✓</h5> <p><img src="https://qiniu.mdnice.com/37d42de035133a144328ea8f9b1f2c5d.png" alt=""></p> <p>从上图分析得出，大文件主要包含：<code>dist.js</code>、<code>lottie.js</code>、<code>lodash.js</code>、<code>loading.json</code> 等文件。所以我们从这几个文件入手，逐个优化：</p> <ul><li><code>moment.js</code> - 配置 <code>moment</code> 忽略本地化，可减少 <code>70kb</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ignoreMomentLocale<span class="token punctuation">:</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>dist.js</code> - 在给单页应用做按需加载优化时，一般采用以下原则：</p> <ol><li>把整个网站划分成一个个小功能，再按照每个功能的相关程度把它们分成几类。</li> <li>把每一类合并为一个 <code>Chunk</code>，按需加载对应的 <code>Chunk</code>。</li> <li>对于用户首次打开你的网站时需要看到的画面所对应的功能，不要对它们做按需加载，而是放到执行入口所在的 <code>Chunk</code> 中，以降低用户能感知的网页加载时间。</li> <li>对于个别依赖大量代码的功能点，例如依赖 <code>Chart.js</code> 去画图表、依赖 <code>flv.js</code> 去播放视频的功能点，可再对其进行按需加载。</li></ol></li> <li><p><code>lottie.js</code> - 分离减少 <code>60kb</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    lottie <span class="token punctuation">:</span> <span class="token string">'react-lottie'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>lodash.js</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>externals: {
lodash : {
    commonjs: 'lodash',
    amd: 'lodash',
    root: '_' // indicates global variable
}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>动态导入以及文件拆分</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>dynamicImport<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    webpackChunkName<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    loadingComponent<span class="token punctuation">:</span> <span class="token string">'./components/Loading/jartto.js'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p>按照上面我们一步步处理后，重新打包分析一下文件构成：</p> <p><img src="https://qiniu.mdnice.com/3d5ea574ce9975900633749f12c4bcd8.png" alt=""></p> <p>这里为什么没有继续拆分 <code>dist.js</code>，是因为目前阶段没有好的方案，需要对代码做很多调整，所以暂且保留。相关信息可以在 <code>Ant-Design Issuse</code> <a href="https://github.com/ant-design/ant-design/issues/12011" target="_blank" rel="noopener noreferrer">Svg icons make bunlde size too large<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中查看解决方案。</p> <h5 id="_5-存放-cdn"><a href="#_5-存放-cdn" aria-hidden="true" class="header-anchor">#</a> 5. 存放 <code>CDN</code></h5> <ul><li><code>loading.json</code> 大小54kb ✓</li> <li><code>svg</code> 替换 <code>2</code> 倍图 ✓</li> <li>删除项目冗余图片 ✓</li></ul> <h5 id="_6-优化-ttfb"><a href="#_6-优化-ttfb" aria-hidden="true" class="header-anchor">#</a> 6. 优化 <code>TTFB</code></h5> <ul><li>减少 <code>DNS</code> 查询</li> <li>使用 <code>CDN</code></li> <li>提早 <code>Flush</code></li> <li>添加周期头</li></ul> <h5 id="_7-移除阻塞渲染的资源"><a href="#_7-移除阻塞渲染的资源" aria-hidden="true" class="header-anchor">#</a> 7. 移除阻塞渲染的资源</h5> <ul><li><p><code>css</code> 预加载 <code>preload</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>异步加载第三方资源</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://cdn.jartto.wang/fastclick.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>没有 <code>async</code> 属性，<code>script</code> 将立即获取（下载）并执行，期间阻塞了浏览器的后续处理。
如果有 <code>async</code> 属性，那么 <code>script</code> 将被异步下载并执行，同时浏览器继续后续的处理。</p></li></ul> <h5 id="_8-确保文本在网页字体加载期间保持可见状态"><a href="#_8-确保文本在网页字体加载期间保持可见状态" aria-hidden="true" class="header-anchor">#</a> 8. 确保文本在网页字体加载期间保持可见状态</h5> <p>利用 <code>font-display</code> 这项 <code>CSS</code> 功能，确保文本在网页字体加载期间始终对用户可见。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Arvo'</span><span class="token punctuation">;</span>
    <span class="token property">font-display</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span><span class="token function">local</span><span class="token punctuation">(</span><span class="token string">'Arvo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://fonts.jartto.wang/fonts/temp.woff2<span class="token punctuation">)</span></span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_9-采用高效的缓存策略提供静态资源"><a href="#_9-采用高效的缓存策略提供静态资源" aria-hidden="true" class="header-anchor">#</a> 9.采用高效的缓存策略提供静态资源</h5> <blockquote><p>延长缓存期限可加快重访网页的速度。</p></blockquote> <p><code>DNS TTL(Time-To-Live)</code> 简单的说：<strong>它表示一条域名解析记录在 <code>DNS</code> 服务器上的缓存时间。</strong></p> <ul><li><p>当各地的 <code>DNS</code> 服务器接受到解析请求时，就会向域名指定的 <code>DNS</code> 服务器发出解析请求从而获得解析记录。</p></li> <li><p>在获得这个记录之后，记录会在 <code>DNS</code> 服务器中保存一段时间，这段时间内如果再接到这个域名的解析请求，<code>DNS</code> 服务器将不再向 <code>DNS</code> 服务器发出请求，而是直接返回刚才获得的记录。</p></li></ul> <blockquote><p>这个记录在 <code>DNS</code> 服务器上保留的时间，就是 <code>TTL</code> 值。</p></blockquote> <p>所以一般更新域名解析的步骤如下：</p> <ul><li>先查看域名当前的 <code>TTL</code> 值。</li> <li>修改 <code>TTL</code> 值为可设定的最小值，建议为 <code>60</code> 秒。</li> <li>等待一天，保证各地的 <code>DNS</code> 服务器缓存都过期并更新了记录。</li> <li>设置修改 <code>DNS</code> 解析到新的记录，这个时候各地的 <code>DNS</code> 就能以最快的速度更新到新的记录。</li> <li>确认各地的 <code>DNS</code> 已经更新完成后，再 <code>TTL</code> 值设置成常用的值（如: <code>TTL=86400</code>）。</li></ul> <p>如下图，<code>TTL</code> 值设置的最佳实践，可供参考：</p> <p><img src="https://qiniu.mdnice.com/9e8e0df4be75d8f3c38c87272b09248d.png" alt=""></p> <blockquote><p>后文我们会详细介绍 <code>DNS</code> 相关内容，欢迎各位童鞋关注。</p></blockquote> <h5 id="_10-避免-dom-规模过大"><a href="#_10-避免-dom-规模过大" aria-hidden="true" class="header-anchor">#</a> 10. 避免 <code>DOM</code> 规模过大</h5> <ul><li><p>网页包含的 <code>DOM</code> 节点最好少于 <code>1500</code> 个左右。</p></li> <li><p>理想状况是，树深度少于 <code>32</code> 个元素，且少于 <code>60</code> 个子/父元素。</p></li> <li><p>大型 <code>DOM</code> 可能会增加内存使用量、导致样式计算用时延长并产生高昂的布局重排费用。</p></li></ul> <h5 id="_11-最大限度地缩短关键请求深度"><a href="#_11-最大限度地缩短关键请求深度" aria-hidden="true" class="header-anchor">#</a> 11. 最大限度地缩短关键请求深度</h5> <blockquote><p><code>关键请求链</code> 显示了以高优先级加载的资源。</p></blockquote> <p>我们可以通过：缩短链长、缩减资源的下载文件大小，或者推迟下载不必要的资源，从而提高网页加载速度。</p> <p><img src="https://qiniu.mdnice.com/d3e58cb28ee2bb2b482934fd847b2628.png" alt=""></p> <p>当 <code>HTML</code> 解析过程中遇到一个 <code>script</code> 标记时，它会暂停 <code>DOM</code> 构建，将控制权移交给 <code>JavaScript</code> 引擎，等 <code>JavaScript</code> 引擎运行完毕，浏览器再从中断的地方恢复 <code>DOM</code> 构建。</p> <blockquote><p>也就是说，执行内联的 JavaScript 会阻塞页面的首次渲染。</p></blockquote> <p>在关键渲染路径中，我们通常要关注三个点：</p> <ul><li>页面首次渲染需要的关键资源数量。</li> <li>关键资源的大小。</li> <li>关键渲染路径的往返次数（<code>Roundtrip</code>）。</li></ul> <blockquote><p>我们的策略也非常简单，就是减少关键资源数量，降低资源大小，减少关键路径的往返次数。</p></blockquote> <p>优化关键渲染路径的常规步骤如下：</p> <ol><li>对关键路径进行分析和特性描述：资源数、字节数、长度。</li> <li>最大限度减少关键资源的数量：删除它们，延迟它们的下载，将它们标记为异步等。</li> <li>优化关键字节数以缩短下载时间（往返次数）。</li> <li>优化其余关键资源的加载顺序：您需要尽早下载所有关键资源，以缩短关键路径长度。</li></ol> <p>更多详情，请参考<a href="https://segmentfault.com/a/1190000013767948" target="_blank" rel="noopener noreferrer">前端性能优化—关键渲染路径<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h5 id="_12-最大限度地减少主线程工作"><a href="#_12-最大限度地减少主线程工作" aria-hidden="true" class="header-anchor">#</a> 12. 最大限度地减少主线程工作</h5> <p>考虑减少为解析、编译和执行 <code>JS</code> 而花费的时间。我们可以提供较小的 <code>JS</code> 负载来实现此目标。</p> <h5 id="_13-最优配置-nginx"><a href="#_13-最优配置-nginx" aria-hidden="true" class="header-anchor">#</a> 13. 最优配置 <code>nginx</code></h5> <ol><li><code>gzip</code> 配置</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>gzip  on;
gzip_min_length  1k;
gzip_buffers     4 8k;
gzip_http_version 1.1;
gzip_comp_level 4;
gzip_types text/plain text/css application/json image/png image/x-icon application/javascript application/x-javascript text/javascript text/xml application/xml application/xml+rss text/cache-manifest application/octet-stream;
gzip_vary on;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li><code>nginx</code> 开启缓存</li></ol> <p>如果你对浏览器缓存还不太清楚，欢迎移步聊一聊浏览器缓存机制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>location <span class="token operator">~</span><span class="token punctuation">.</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>html<span class="token operator">|</span>htm<span class="token operator">|</span>js<span class="token operator">|</span>css<span class="token operator">|</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token operator">|</span>ico<span class="token operator">|</span>json<span class="token operator">|</span>otf<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
  root <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>jartto_web<span class="token operator">/</span><span class="token punctuation">;</span>
  index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
  expires <span class="token number">1</span>d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><code>Nginx</code> 能非常有效地直接处理静态内容。在静态文件和 <code>Nginx</code> 在同一主机的情况下，这种特性尤为有用。</p></blockquote> <h2 id="效果如何？"><a href="#效果如何？" aria-hidden="true" class="header-anchor">#</a> 效果如何？</h2> <blockquote><p>优化前：网站评分 27 ，首次内容绘制 6.9 秒</p></blockquote> <p>网站评分：</p> <p><img src="https://qiniu.mdnice.com/ecd524b4a8b5c89b8734d2cd04ddf7f3.png" alt="网站评分"></p> <p>加载概况：</p> <p><img src="https://qiniu.mdnice.com/738d9f51faaa8587ae119ca2bc4c7220.png" alt=""></p> <blockquote><p>优化后：网站评分 70 ，首次内容绘制 1.6 秒</p></blockquote> <p>网站评分：</p> <p><img src="https://qiniu.mdnice.com/24aab2e3d64a26560eb6106885c1087b.png" alt=""></p> <p>加载概况：</p> <p><img src="https://qiniu.mdnice.com/0b0264fdadf80ea3a5735a3802d12e95.png" alt=""></p> <blockquote><p>当然，优化还可以做更多，我们尽量让网站的评分接近 100 分，譬如：</p></blockquote> <p>网站评分：</p> <p><img src="https://qiniu.mdnice.com/432bea1804a1f3a4569fc748bb4a10e6.png" alt=""></p> <p>加载概况：</p> <p><img src="https://qiniu.mdnice.com/88fa9e000b6fe2ec6ccfae530058c920.png" alt=""></p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>我们从头优化下来，做了不少代码改动，也达到了不错的效果。但是有几点还是需要注意：</p> <h5 id="_1-尽可能减少白屏出现时间"><a href="#_1-尽可能减少白屏出现时间" aria-hidden="true" class="header-anchor">#</a> 1. 尽可能减少白屏出现时间</h5> <p>骨架图解决 <code>webview</code> 加载页面过长的白屏过程。</p> <h5 id="_2-关注整站性能，如-ttfb"><a href="#_2-关注整站性能，如-ttfb" aria-hidden="true" class="header-anchor">#</a> 2. 关注整站性能，如 <code>TTFB</code></h5> <p>服务端接口也需要同步优化，而不要仅仅依赖前端单方面优化。</p> <h5 id="_3-按照使用情况加载优先使用的资源"><a href="#_3-按照使用情况加载优先使用的资源" aria-hidden="true" class="header-anchor">#</a> 3. 按照使用情况加载优先使用的资源</h5> <ul><li><code>css</code> 预加载</li> <li><code>font</code> 预加载</li> <li><code>js</code> 预加载</li> <li>图片懒加载</li></ul> <h5 id="_4-高效利用-dns-和-cdn"><a href="#_4-高效利用-dns-和-cdn" aria-hidden="true" class="header-anchor">#</a> 4. 高效利用 <code>DNS</code> 和 <code>CDN</code></h5> <ul><li>增加缓存时间</li> <li><code>DNS</code> 预解析</li></ul> <p>网站优化从来不是一蹴而就，需要不断的去优化细节，不断的摸索尝试。从我的角度来看，其实优化更像是在网站性能和加载速度之间找到一个平衡点。譬如，文中我们为了优化文件打包大小，进行了大文件拆分。随之而来的问题就是拆分后的文件可能还会对某些文件有依赖，那么就影响到了关键渲染路径。</p> <p>所以，优化不存在什么奇技淫巧，不断的去尝试，找到这个最佳优化点，这才是根本。</p></div> <span id="footerPost" data-v-3a18dd0a></span></div> <div id="post-toc" class="post-toc el-col el-col-6" data-v-3a18dd0a><div class="catalog-body" data-v-3a18dd0a><h4 class="catalog-title" data-v-3a18dd0a>目录</h4> <ul id="catalog-list" class="catalog-list" data-v-3a18dd0a></ul></div></div></div> <div class="el-row is-justify-center el-row--flex" data-v-3a18dd0a><div class="post-card vssue-wrap el-col el-col-21 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a></div></div> <div class="post-nav el-row is-justify-space-around el-row--flex" data-v-3a18dd0a><div class="post-prev el-col el-col-7" data-v-3a18dd0a><div data-v-3a18dd0a><a href="/posts/Chapter6/vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" data-v-3a18dd0a><i class="el-icon-arrow-left" data-v-3a18dd0a></i> Prev
        </a> <p class="nav-title" data-v-3a18dd0a>Vue生命周期</p></div></div> <div class="post-next el-col el-col-7 el-col-lg-pull-5" data-v-3a18dd0a><div data-v-3a18dd0a><a href="/posts/Chapter1/%E9%97%AD%E5%8C%85.html" data-v-3a18dd0a>
          Next
          <i class="el-icon-arrow-right" data-v-3a18dd0a></i></a> <p class="nav-title" data-v-3a18dd0a>闭包</p></div></div></div> <span data-v-3f1acc1c data-v-3a18dd0a><button type="button" class="el-button toc-btn el-button--primary el-button--mini is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-tickets" data-v-3f1acc1c></i></span></button> <button type="button" class="el-button gotop-btn el-button--primary is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-arrow-up" data-v-3f1acc1c></i></span></button></span></div></main></section> <button type="button" class="el-button gotop-btn el-button--primary is-circle" style="display:none;" data-v-1918517c data-v-8ae45032><!----><!----><span><i class="el-icon-arrow-up" data-v-1918517c></i></span></button></section> <div class="overlay" data-v-8ae45032></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e48c3d44.js" defer></script><script src="/assets/js/1.9aa2b147.js" defer></script><script src="/assets/js/6.ab6f709e.js" defer></script><script src="/assets/js/5.0f5d195d.js" defer></script><script src="/assets/js/8.b943e6ee.js" defer></script><script src="/assets/js/11.fb958432.js" defer></script><script src="/assets/js/7.a46ab4a3.js" defer></script><script src="/assets/js/33.bc58239e.js" defer></script><script src="/assets/js/16.f738196f.js" defer></script>
  </body>
</html>
