<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <title>原型和原型链 | 面试API</title>
    <meta name="description" content="前端面试API，自检清单，公众号推荐" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="原型和原型链 | 面试API" />
    <meta property="og:site_name" content="原型和原型链 | 面试API" />
    <meta property="og:locale" content="zh-CN" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="原型和原型链 | 面试API" />
    <link rel="shortut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.c742bf60.css" as="style"><link rel="preload" href="/assets/js/app.24b3a619.js" as="script"><link rel="preload" href="/assets/js/1.cdcebdd2.js" as="script"><link rel="preload" href="/assets/js/6.ab6f709e.js" as="script"><link rel="preload" href="/assets/js/5.0f5d195d.js" as="script"><link rel="preload" href="/assets/js/8.6f752a91.js" as="script"><link rel="preload" href="/assets/js/11.f2ac282b.js" as="script"><link rel="preload" href="/assets/js/7.a46ab4a3.js" as="script"><link rel="preload" href="/assets/js/27.104bd3b6.js" as="script"><link rel="preload" href="/assets/js/16.cc873b0d.js" as="script"><link rel="prefetch" href="/assets/js/10.175139c9.js"><link rel="prefetch" href="/assets/js/12.eec60165.js"><link rel="prefetch" href="/assets/js/13.c7679de2.js"><link rel="prefetch" href="/assets/js/14.cb3c0c5c.js"><link rel="prefetch" href="/assets/js/15.ee045e63.js"><link rel="prefetch" href="/assets/js/17.c9beec15.js"><link rel="prefetch" href="/assets/js/18.a55fa89e.js"><link rel="prefetch" href="/assets/js/19.6a1d7086.js"><link rel="prefetch" href="/assets/js/20.3e55f9ce.js"><link rel="prefetch" href="/assets/js/21.43d74702.js"><link rel="prefetch" href="/assets/js/22.80c5764c.js"><link rel="prefetch" href="/assets/js/23.7db4a8c3.js"><link rel="prefetch" href="/assets/js/24.1cb17e4b.js"><link rel="prefetch" href="/assets/js/25.d6f6e25b.js"><link rel="prefetch" href="/assets/js/26.de6a8bc4.js"><link rel="prefetch" href="/assets/js/28.7cecc62d.js"><link rel="prefetch" href="/assets/js/29.ba18c71b.js"><link rel="prefetch" href="/assets/js/30.bacd4b39.js"><link rel="prefetch" href="/assets/js/31.a1dd722c.js"><link rel="prefetch" href="/assets/js/32.c8c165f0.js"><link rel="prefetch" href="/assets/js/33.5942603d.js"><link rel="prefetch" href="/assets/js/34.b67f80b3.js"><link rel="prefetch" href="/assets/js/35.b67c7e70.js"><link rel="prefetch" href="/assets/js/36.963a484c.js"><link rel="prefetch" href="/assets/js/37.a1cab853.js"><link rel="prefetch" href="/assets/js/38.794604a3.js"><link rel="prefetch" href="/assets/js/39.5dbb6d61.js"><link rel="prefetch" href="/assets/js/4.2b5d276e.js"><link rel="prefetch" href="/assets/js/40.01547307.js"><link rel="prefetch" href="/assets/js/41.9436027a.js"><link rel="prefetch" href="/assets/js/42.1f2b12e3.js"><link rel="prefetch" href="/assets/js/43.f8c25e1f.js"><link rel="prefetch" href="/assets/js/44.8eec2572.js"><link rel="prefetch" href="/assets/js/45.c1cc011d.js"><link rel="prefetch" href="/assets/js/46.0573a348.js"><link rel="prefetch" href="/assets/js/47.d237759c.js"><link rel="prefetch" href="/assets/js/48.edf49dc6.js"><link rel="prefetch" href="/assets/js/49.0566ff6c.js"><link rel="prefetch" href="/assets/js/50.cc4c02cd.js"><link rel="prefetch" href="/assets/js/51.587ec4ab.js"><link rel="prefetch" href="/assets/js/52.d978ffe2.js"><link rel="prefetch" href="/assets/js/53.c2c9528e.js"><link rel="prefetch" href="/assets/js/54.b01d4d3a.js"><link rel="prefetch" href="/assets/js/55.a0973291.js"><link rel="prefetch" href="/assets/js/56.405c2bf4.js"><link rel="prefetch" href="/assets/js/57.b2ad542a.js"><link rel="prefetch" href="/assets/js/58.0f5d52c7.js"><link rel="prefetch" href="/assets/js/59.7e25e5ea.js"><link rel="prefetch" href="/assets/js/60.99e73854.js"><link rel="prefetch" href="/assets/js/61.d361a6ca.js"><link rel="prefetch" href="/assets/js/62.51928540.js"><link rel="prefetch" href="/assets/js/63.58ba0b36.js"><link rel="prefetch" href="/assets/js/64.73444fb0.js"><link rel="prefetch" href="/assets/js/9.2107d3eb.js"><link rel="prefetch" href="/assets/js/search.841715a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c742bf60.css">
  </head>
  <body>
    <div id="loader-wrapper" style="display: none;opacity:0">
      <div id="loader"></div>
      <div class="loader-section section-left"></div>
      <div class="loader-section section-right"></div>
    </div>
    <div id="app" data-server-rendered="true"><div data-v-8ae45032><section class="el-container" data-v-8ae45032><aside width="200px" class="el-aside menu" style="width:auto;" data-v-28ba16cc data-v-8ae45032><div class="brand-wrap" style="background-image:url(/aside.jpg);" data-v-28ba16cc><div class="brand" data-v-28ba16cc><a href="/" class="avatar waves-effect waves-circle waves-light router-link-active" data-v-28ba16cc><img src="/infoq1.png" data-v-28ba16cc></a> <hgroup class="introduce" data-v-28ba16cc><div class="nickname" data-v-28ba16cc><img src="/name.png" data-v-28ba16cc></div> <div data-v-28ba16cc><a title="253929992@qq.com" class="mail" data-v-28ba16cc>253929992@qq.com</a></div></hgroup></div></div> <ul role="menubar" class="menu-wrap el-menu" style="background-color:;" data-v-28ba16cc><li role="menuitem" aria-haspopup="true" aria-expanded="true" class="el-submenu is-opened" data-v-28ba16cc><div class="el-submenu__title" style="padding-left:20px;color:;background-color:;"><i class="iconfont icon-icon37" data-v-28ba16cc></i> <span slot="title" class="item-title" data-v-28ba16cc>自检清单</span><i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><ul role="menu" class="el-menu el-menu--inline" style="background-color:;"> <li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            JS基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            HTML&amp;CSS
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            计算机基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            数据结构和算法
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            运行环境
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            框架
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            工程化
          </span></li></ul></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-shijianzhou" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        时间轴
      </span></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-guanyu" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        个人档案
      </span></li></ul></aside> <section class="el-container container-warp" data-v-8ae45032><header id="topHeader" class="el-header top-header" style="height:60px;padding-left:300px;" data-v-7e316482 data-v-8ae45032><div class="header-warp el-row is-align-center el-row--flex" data-v-7e316482><div class="el-col el-col-2 el-col-xs-7" data-v-7e316482><button type="button" class="el-button header-btn el-button--primary el-button--mini is-circle" data-v-7e316482><!----><!----><span><i class="iconfont icon-rightjustified" data-v-7e316482></i></span></button></div> <div class="el-col el-col-10 el-col-xs-24" data-v-7e316482><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-1288" class="el-autocomplete search-input" data-v-7e316482><div class="el-input el-input--small el-input--suffix"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="search-popper" placeholder="搜搜看" fetchSuggestions="function () { [native code] }" debounce="300" placement="bottom-start" popperAppendToBody="true" value="" class="el-input__inner"><!----><span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-input__icon el-icon-search search-ico" data-v-7e316482></i><!----></span><!----></span><!----></div><div role="region" class="el-autocomplete-suggestion el-popper search-popper" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div class="nav-col el-col el-col-8 el-col-offset-10 el-col-xs-24" data-v-7e316482><ul role="menubar" class="header-menu el-menu--horizontal el-menu" style="background-color:transparent;" data-v-7e316482><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:#fdf5ab;border-bottom-color:transparent;background-color:transparent;" data-v-7e316482>Home</li><li role="menuitem" tabindex="-1" class="el-menu-item is-active" style="color:#ffd04b;border-bottom-color:#ffd04b;background-color:transparent;" data-v-7e316482>Blog</li></ul></div></div></header> <main class="el-main my-main" style="margin-left:238px;" data-v-47f536a8 data-v-8ae45032><div class="content-header index-header" style="background-image:url(/banner.jpg);" data-v-1ba67baf data-v-47f536a8><div class="container" data-v-1ba67baf><h1 id="conentHeader" class="title animated fadeInDown" data-v-1ba67baf>原型和原型链</h1> <h5 class="subtitle" data-v-1ba67baf>最后更新时间：2019-10-21 11:26:01</h5> <div class="el-row is-align-center el-row--flex" data-v-47f536a8><div class="tag-card el-col el-col-20 el-col-xs-23 el-col-sm-22 el-col-md-22 el-col-lg-20" data-v-47f536a8><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>浏览器原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编译原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>HTML汇总</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>垂直居中</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS伪类</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>BFC</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue组件通信</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS选择器</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS盒模型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>三栏布局</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>实现轮子</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>浏览器API</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>开发和测试</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>React</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据流管理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据结构</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Nginx</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Node</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>开发提速</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Angular</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>持续集成</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>实用库</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>手写</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>网络协议</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>项目构建</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>版本控制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>TypeScript</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>多端开发</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>设计模式</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>算法</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编码能力</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>变量和类型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>执行机制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>作用域和闭包</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>语法和API</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>原型和原型链</span></div></div></div></div> <div data-v-3a18dd0a data-v-47f536a8 data-v-47f536a8><div class="post-content el-row is-justify-center el-row--flex" data-v-3a18dd0a><div id="post-card" class="post-card post-sign el-col el-col-16 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a><div class="content__default" data-v-3a18dd0a><h2 id="_1-理解原型设计模式以及-javascript-中的原型规则。"><a href="#_1-理解原型设计模式以及-javascript-中的原型规则。" aria-hidden="true" class="header-anchor">#</a> 1. 理解原型设计模式以及 JavaScript 中的原型规则。</h2> <p>我们创建的每个函数都有一个 <code>protoype</code> 属性，这个 <code>prototype</code> 属性是一个指针，指向<strong>原型对象</strong>。</p> <p><strong>这个对象的用途</strong>：包含由特定类型的所有实例共享的属性和方法（通俗的说就是，所有特定类型的实例都可以共享这个对象上的属性和方法）。</p> <h3 id="原型对象的两种赋值方法："><a href="#原型对象的两种赋值方法：" aria-hidden="true" class="header-anchor">#</a> 原型对象的两种赋值方法：</h3> <h5 id="_1-给原型对象添加属性或方法："><a href="#_1-给原型对象添加属性或方法：" aria-hidden="true" class="header-anchor">#</a> 1. 给原型对象添加属性或方法：</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// Person 原型对象上默认只有一个 constructor 属性</span>
<span class="token comment">// 这个 constructor 指向 Person</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;jser&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> per2<span class="token punctuation">.</span>sayName<span class="token punctuation">;</span> <span class="token comment">// true</span>
per1<span class="token punctuation">.</span>age <span class="token operator">===</span> per2<span class="token punctuation">.</span>age<span class="token punctuation">;</span>  <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>正如上边所说，实例 <code>per1</code> 和 <code>per2</code> 共享 <code>Person</code> 原型对象的属性和方法。</p> <h5 id="_2-重写原型对象："><a href="#_2-重写原型对象：" aria-hidden="true" class="header-anchor">#</a> 2. 重写原型对象：</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;jser&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> per2<span class="token punctuation">.</span>sayName<span class="token punctuation">;</span> <span class="token comment">// true</span>
per1<span class="token punctuation">.</span>age <span class="token operator">===</span> per2<span class="token punctuation">.</span>age<span class="token punctuation">;</span>  <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这种方式会重写原型对象，重写后的原型对象默认的 <code>constructor</code> 属性不再指向 <code>Person</code> 此时它指向 <code>Object</code>。（下文会有讲到）</p> <p>我们可以手动将它指向 <code>Person</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="原型对象内存分析："><a href="#原型对象内存分析：" aria-hidden="true" class="header-anchor">#</a> 原型对象内存分析：</h3> <p><img src="https://i.loli.net/2019/09/25/kC9hIFf1PJosjHX.png" alt="屏幕快照 2019-09-25 下午4.25.37.png"></p> <p>默认情况下，原型对象 <code>Person.prototype</code> 会包含一个 <code>constructor</code> 属性，这个属性上也有一个 <code>prototype</code> 属性，这个属性是一个指针，指向<strong>原型对象</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>创建的实例也有 constructor 属性，可以使用 <span class="token class-name">实例</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype 去修改或扩展原型对象。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person <span class="token comment">// true</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当调用构造函数创建一个新实例后，该实例内部会包含一个内部属性 <code>__proto__</code>，它指向构造函数的原型对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>person1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个<code>连接</code>只存在于<strong>实例</strong>与构造函数的<strong>原型对象</strong>之间，而不是存在于实例与构造函数之间，<strong>也就是说这个内部属性和构造函数没有直接的关系。</strong></p> <h3 id="原型对象的值不能被实例重写："><a href="#原型对象的值不能被实例重写：" aria-hidden="true" class="header-anchor">#</a> 原型对象的值不能被实例重写：</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;jser&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zxl&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 重写 name</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// zxl person实例 在自身查到到了 name </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// jser 在原型对象上查找到的 name</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>可以看到原型对象中的 <code>name</code> 没有被改变，<code>person2.name</code> 在原型对象上查找的值仍为 <code>&quot;jser&quot;</code>。</p> <p><strong>原型模式查找属性原则：</strong></p> <ul><li><p>在<strong>原型模式</strong>中，当通过实例读取属性值时，首先会在实例自身上查找，如果实例上没有，则就会去原型对象上搜索；</p></li> <li><p>如果在<strong>自身</strong>上找到，就使用这个值，不会再继续去原型对象上查找。</p></li></ul> <p><img src="https://i.loli.net/2019/09/25/QdMBUg5YSR6ce3p.png" alt="屏幕快照 2019-09-25 下午5.13.55.png"></p> <h3 id="原型模式的动态性："><a href="#原型模式的动态性：" aria-hidden="true" class="header-anchor">#</a> 原型模式的动态性：</h3> <p>上文说到不能通过实例对象来重写原型对象上的属性，如果想要重写原型对象上的属性，只能通过原型对象自身去修改。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>原型模型原则：由于在原型中查找值的过程是一次搜索，因此在对原型对象做的任何修改都会立即从实例上反映出来，即使是先创建实例后修改原型也如此。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 先创建实例 后修改原型对象</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per2<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变成改写后的 22</span>

<span class="token comment">// 后创建实例 先修改原型对象</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per2<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变成改写后的 22</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>如果先创建了实例，之后用字面量赋值的方式来重写原型对象，这就会切断现有原型对象与之前存在的任何实例之间的联系。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;jser&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
per1<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这段代码会报 <code>Uncaught TypeError: per1.sayHi is not a function</code>，说明实例 <code>per1</code> 没有搜索不到 <code>sayHi</code> 这个方法，因为在创建 <code>per1</code> 实例之前，<code>per1.__proto__</code> 指向的原型对象只有一个默认属性 <code>constructor</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> constructor<span class="token punctuation">:</span> ƒ <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重写的 <code>Person.prototype</code> 被分配在了新的内存空间中：</p> <p><img src="https://i.loli.net/2019/09/25/3nq4eFlfZCEhuNy.png" alt="屏幕快照 2019-09-25 下午5.58.18.png"></p> <h3 id="原型对象的缺点："><a href="#原型对象的缺点：" aria-hidden="true" class="header-anchor">#</a> 原型对象的缺点：</h3> <p><strong>原型对象</strong>的好处是原型中的所有属性和方法可以被很多实例共享。</p> <p>缺点是当原型中包含引用类型的值的属性时，一个实例对象对这个引用类型的属性做了修改，在其他实例对象中也可以体现出来。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;jser&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    friends<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;javaer&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phper&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
per1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;pythener&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> per2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>per2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>原型对象中引用类型属性 <code>friends</code> 被修改成了 <code>[&quot;javaer&quot;, &quot;phper&quot;, &quot;pythener&quot;]</code>，因此实例对象 <code>per2</code> 搜索到的结果也被 <code>per1</code> 修改了。</p> <h3 id="从原型对象中体现的一些原型模式的规则可以总结如下："><a href="#从原型对象中体现的一些原型模式的规则可以总结如下：" aria-hidden="true" class="header-anchor">#</a> 从原型对象中体现的一些原型模式的规则可以总结如下：</h3> <ul><li><p>构造函数有一个 <code>prototype</code> 指针指向原型对象，构造函数的实例共享原型对象上的属性和方法。</p></li> <li><p>实例与原型对象之间有一个 <code>__proto__</code> 连接。</p></li> <li><p>原型对象上有一个 <code>constructor</code> 属性默认指向构造函数，<code>constructor</code> 属性上有一个 <code>prototype</code> 指针指向原型对象。</p></li> <li><p>原型对象上的值不能被实例重写。</p></li> <li><p>在原型模式中，通过实例子搜索属性时，实例上的属性会屏蔽原型对象上的同名属性。</p></li> <li><p>原型模式中查找值的过程是一次搜索，因此在对原型对象做的任何修改都会立即从实例上反映出来，即使是先创建实例后修改原型也如此。</p></li> <li><p>如果先创建了实例，之后用字面量赋值的方式来重写原型对象，这就会切断现有原型对象与之前存在的任何实例之间的联系。</p></li> <li><p>原型可以被继承，如通过 <code>Object.create(prototype, optionalDescriptorObjects)</code> 来实现原型继承。</p></li></ul> <h2 id="_2-instanceof-的底层实现原理，手动实现一个-instanceof。"><a href="#_2-instanceof-的底层实现原理，手动实现一个-instanceof。" aria-hidden="true" class="header-anchor">#</a> 2. instanceof 的底层实现原理，手动实现一个 instanceof。</h2> <p><strong>instanceof</strong>是用来判断 <code>a</code> 是否为 <code>B</code> 的实例，表达式为：a <code>instanceof</code> B，如果 <code>a</code> 是 <code>B</code> 的实例，则返回 <code>true</code>，否则返回 <code>false</code>。</p> <p><strong>在这里需要特别注意的是：<code>instanceof</code> 检测的是原型对象。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 底层实现原理：</span>
<span class="token keyword">instanceof</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">L</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">===</span> <span class="token constant">R</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// A的内部属性 __proto__ 指向 B 的原型对象</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>代码的基本实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_instanceof</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> <span class="token constant">F</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">F</span><span class="token punctuation">)</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Right-hand side of 'instanceof' is not an object</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">L</span> <span class="token operator">=</span> instance<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">L</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Unexpected identifier</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_3-实现继承的几种方式以及他们的优缺点。"><a href="#_3-实现继承的几种方式以及他们的优缺点。" aria-hidden="true" class="header-anchor">#</a> 3. 实现继承的几种方式以及他们的优缺点。</h2> <p>继承的继承方式：<code>原型链继承</code>、 <code>构造继承（call/apply）</code>、<code>组合继承</code>、<code>寄生组合继承</code> <code>ES6继承</code>。</p> <h3 id="原型链继承"><a href="#原型链继承" aria-hidden="true" class="header-anchor">#</a> 原型链继承</h3> <h5 id="首先回顾下构造函数、原型、和实例之间的关系："><a href="#首先回顾下构造函数、原型、和实例之间的关系：" aria-hidden="true" class="header-anchor">#</a> 首先回顾下构造函数、原型、和实例之间的关系：</h5> <p>每一个构造函数都有一个原型对象 <code>F.prototype</code>，原型对象都包含一个指向构造构造的指针 <code>constructor</code>，而实例都包含一个指向原型对象的内部指针 <code>__proto__</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">F</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">F</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>**原型链继承的思想：**将父类的实例作为子类的原型对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tiger</span><span class="token punctuation">(</span><span class="token parameter">leg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>leg <span class="token operator">=</span> leg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getLeg</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>leg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">eat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eat <span class="token operator">=</span>  eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 将 Tiger 的实例对象 Tiger {leg: &quot;四条腿&quot;} 作为 Cat 的原型对象</span>
<span class="token comment">// 这是一个重写 Cat 原型对象的过程</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token punctuation">(</span><span class="token string">&quot;四条腿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getEat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;鱼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getLeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 四条腿</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 鱼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>原型链继承实际上是重写子类原型对象的过程，子类原型对象的 <code>constructor</code> 属性会被默认指向父类。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Tiger<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>原型链继承的缺点：</strong> 当父类的原型对象修改后，子类也会访问到修改后的结果，父类一变其他都跟着变了。</p> <p><em>遵循了原型模式的动态性（请看第 1 小节）</em></p> <h3 id="构造继承（call-apply）"><a href="#构造继承（call-apply）" aria-hidden="true" class="header-anchor">#</a> 构造继承（call/apply）</h3> <p><strong>构造继承的思想：</strong> 利用 <code>call</code> 或 <code>apply</code> 将父类的 <code>this</code> 硬绑定到子类上。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tiger</span> <span class="token punctuation">(</span><span class="token parameter">leg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>leg <span class="token operator">=</span> leg<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getLeg</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>leg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//对原型对象进行的扩展的方法就无法被继承了</span>
<span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getEat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;吃肉&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">eat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 call 将 this 硬绑定到 Cat 类上</span>
    <span class="token comment">// 创建 Cat 类实例后，实例调用方法时，this 指向 Cat</span>
    <span class="token comment">// console.log(this); Cat </span>
    <span class="token function">Tiger</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'四条腿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>　　
    <span class="token keyword">this</span><span class="token punctuation">.</span>eat <span class="token operator">=</span> eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;鱼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>leg<span class="token punctuation">)</span><span class="token punctuation">;</span>　　　　  <span class="token comment">// 四条腿 （继承自 Tiger 类）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>　　<span class="token comment">// 报错 调用不到 Tiger 类原型对象上面的方法　　</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>构造继承的缺点：</strong></p> <ul><li><p>只能继承父类的实例属性或方法，不能继承父类原型上的属性或方法，无法实现函数复用。</p></li> <li><p>每个子类都有父类实例函数的副本，性能会有耗损。</p></li></ul> <h3 id="组合继承"><a href="#组合继承" aria-hidden="true" class="header-anchor">#</a> 组合继承</h3> <p>**组合继承的思想：**是将<code>原型链继承</code>和<code>构造继承</code>组合起来使用，是常用的一种继承方式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tiger</span><span class="token punctuation">(</span><span class="token parameter">leg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>leg <span class="token operator">=</span> leg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getLeg</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>leg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">eat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造继承 使用 call 调用父类 将 this 硬绑定到子类上</span>
    <span class="token comment">// 继承父类的实例属性或方法</span>
    <span class="token function">Tiger</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;四条腿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二次调用父类</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>eat <span class="token operator">=</span>  eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用原型链继承 将 Tiger 的实例对象 Tiger {leg: &quot;四条腿&quot;} 作为 Cat 的原型对象</span>
<span class="token comment">// 继承父类的原型属性或原型方法</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token punctuation">(</span><span class="token string">&quot;四条腿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 第一次调用父类</span>

<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getEat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;鱼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 触发第二次调用</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>leg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 四条腿 （继承自父的实例属性 ）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getLeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 四条腿 （继承自父类的原型方法）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 鱼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>第一次调用 <code>Tiger</code> 构造函数时，<code>Cat.prototype</code> 会得到属性 <code>leg</code>，它是父类的实例属性，只不过现在位于子类的原型对象中。
当 使用 <code>new</code> 调用 <code>Cat</code> 构造函数时，又会调用一次 <code>Tiger</code> 构造函数，这一次会在 <code>new</code> 创建的新对象上创建实例属性 <code>leg</code>， 于是这个属性就屏蔽了原型对象上的同名属性。</p> <p><strong>组合继承的缺点：</strong> 调用了两次父类，第二次调用父类时，会在新对象上创建实例属性，这会屏蔽存在子类原型对象上的同名属性。</p> <h3 id="寄生式继承"><a href="#寄生式继承" aria-hidden="true" class="header-anchor">#</a> 寄生式继承</h3> <p>**寄生继承的思想：**创建一个仅用于封装继承过程的函数，该函数在内部以某种形式来做增强对象，最后返回对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">cloneObj</span><span class="token punctuation">(</span><span class="token parameter">parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> clone <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    clone<span class="token punctuation">.</span><span class="token function-variable function">getLeg</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>leg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> clone<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 寄生</span>
<span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> tiger <span class="token operator">=</span> <span class="token punctuation">{</span>
    eat<span class="token punctuation">:</span> <span class="token string">&quot;肉&quot;</span><span class="token punctuation">,</span>
    leg<span class="token punctuation">:</span> <span class="token string">&quot;四条&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token function">cloneObj</span><span class="token punctuation">(</span>tiger<span class="token punctuation">)</span><span class="token punctuation">;</span>
cat<span class="token punctuation">.</span><span class="token function">getLeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 四条</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>**寄生继承的缺点：**使用寄生式继承为对象添加方法，会由于不能做到方法的复用而降低效率，这一点和构造函数模式类似。</p> <h3 id="寄生组合继承"><a href="#寄生组合继承" aria-hidden="true" class="header-anchor">#</a> 寄生组合继承</h3> <p>**寄生组合继承思想：**是在组合继承的基础上，使用<code>寄生</code>方式对组合继承进行的一次优化。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Tiger</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>leg <span class="token operator">=</span> <span class="token string">&quot;四条腿&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getEat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">eat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造继承 使用 call 调用父类 将 this 硬绑定到子类上</span>
    <span class="token comment">// 继承父类的实例属性或方法</span>
    <span class="token function">Tiger</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;老虎&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>eat <span class="token operator">=</span> eat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 寄生</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">F</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>         <span class="token comment">// 创建一个空对象作为寄生</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Tiger</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// 将父类的原型对象寄生到空对象的原型对象上</span>
    <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor  <span class="token operator">=</span> Cat<span class="token punctuation">;</span>    <span class="token comment">// 构造指针手动指向子类</span>
    <span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 将空对象的实例作为子类的原型对象 （子类只继承了父类的原型上的方法和属性）</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;鱼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>eat<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 鱼 // （子类实例自身的属性）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span>leg<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 四条腿 （继承了父类原型上的属性）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat<span class="token punctuation">.</span><span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>寄生组合继承是实现基于类型的继承的最有效的方式，但是实现起来相对复杂，代码量会很大。</strong></p> <h3 id="es6-继承（这里在本节作为了解）"><a href="#es6-继承（这里在本节作为了解）" aria-hidden="true" class="header-anchor">#</a> ES6 继承（这里在本节作为了解）</h3> <p>ES6 中提供了 <code>class</code> 构造函数的写法，对于继承 <code>class</code> 可以使用 <code>extends</code> 关键字。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">leg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>leg <span class="token operator">=</span> leg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getLeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>leg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Tiger</span> <span class="token punctuation">{</span>  
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">leg<span class="token punctuation">,</span> eat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>leg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//相当于构造继承中的 Tiger.call(this, leg);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eat <span class="token operator">=</span> eat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//子类独有的方法</span>
    <span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

    <span class="token keyword">const</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;四条腿&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;鱼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cat<span class="token punctuation">.</span><span class="token function">getLeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cat<span class="token punctuation">.</span><span class="token function">getEat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat <span class="token keyword">instanceof</span> <span class="token class-name">Cat</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cat <span class="token keyword">instanceof</span> <span class="token class-name">Tiger</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>拓展：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">ES6</span> 提供了 Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法也可以实现继承。
语法：Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">[</span><span class="token punctuation">,</span> propertiesObject<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-至少说出一种开源项目-如node-中应用原型继承的案例。"><a href="#_4-至少说出一种开源项目-如node-中应用原型继承的案例。" aria-hidden="true" class="header-anchor">#</a> 4. 至少说出一种开源项目(如Node)中应用原型继承的案例。</h2> <h2 id="_5-描述-new-一个对象的详细过程，手动实现一个-new-操作符。"><a href="#_5-描述-new-一个对象的详细过程，手动实现一个-new-操作符。" aria-hidden="true" class="header-anchor">#</a> 5. 描述 new 一个对象的详细过程，手动实现一个 new 操作符。</h2> <p><strong>使用 <code>new</code>操作符来调用函数时，会自动执行下面的操作：</strong></p> <p>1.创建一个新的空对象；</p> <p>2.这个对象会被执行 <code>[[prototpye]]</code> 连接；</p> <p>3.这个新对象会绑定到函数调用的 <code>this</code>；</p> <p>4.如果函数没用返回其他对象，那么 <code>new</code> 调用的函数会自动返回这个新对象。</p> <p><strong>手动实现：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// new 操作符的模拟实现</span>
<span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个空对象</span>
    <span class="token keyword">let</span> <span class="token constant">C</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 获得构造函数</span>
    o<span class="token punctuation">.</span>constructor <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">;</span>     <span class="token comment">// 将空对象的 constructor 默认指向构造函数</span>
    o<span class="token punctuation">.</span>__proto___ <span class="token operator">=</span> <span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>  <span class="token comment">// 进行 [[prototype]] 连接</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 进行 this 绑定 并获得构造函数返回值</span>
    <span class="token comment">// 返回处理</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> res <span class="token punctuation">:</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;jser&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// ”jser“</span>
p<span class="token punctuation">.</span>constructor  <span class="token comment">// Person</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_6-理解-es6-中-class-构造以及继承的底层实现原理。"><a href="#_6-理解-es6-中-class-构造以及继承的底层实现原理。" aria-hidden="true" class="header-anchor">#</a> 6. 理解 es6 中 class 构造以及继承的底层实现原理。</h2></div> <span id="footerPost" data-v-3a18dd0a></span></div> <div id="post-toc" class="post-toc el-col el-col-6" data-v-3a18dd0a><div class="catalog-body" data-v-3a18dd0a><h4 class="catalog-title" data-v-3a18dd0a>目录</h4> <ul id="catalog-list" class="catalog-list" data-v-3a18dd0a></ul></div></div></div> <div class="el-row is-justify-center el-row--flex" data-v-3a18dd0a><div class="post-card vssue-wrap el-col el-col-21 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a></div></div> <div class="post-nav el-row is-justify-space-around el-row--flex" data-v-3a18dd0a><div class="post-prev el-col el-col-7" data-v-3a18dd0a><div data-v-3a18dd0a><a href="/posts/Chapter1/%E8%AF%AD%E6%B3%95%E5%92%8CAPI.html" data-v-3a18dd0a><i class="el-icon-arrow-left" data-v-3a18dd0a></i> Prev
        </a> <p class="nav-title" data-v-3a18dd0a>语法和API</p></div></div> <div class="post-next el-col el-col-7 el-col-lg-pull-5" data-v-3a18dd0a></div></div> <span data-v-3f1acc1c data-v-3a18dd0a><button type="button" class="el-button toc-btn el-button--primary el-button--mini is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-tickets" data-v-3f1acc1c></i></span></button> <button type="button" class="el-button gotop-btn el-button--primary is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-arrow-up" data-v-3f1acc1c></i></span></button></span></div></main></section> <button type="button" class="el-button gotop-btn el-button--primary is-circle" style="display:none;" data-v-1918517c data-v-8ae45032><!----><!----><span><i class="el-icon-arrow-up" data-v-1918517c></i></span></button></section> <div class="overlay" data-v-8ae45032></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.24b3a619.js" defer></script><script src="/assets/js/1.cdcebdd2.js" defer></script><script src="/assets/js/6.ab6f709e.js" defer></script><script src="/assets/js/5.0f5d195d.js" defer></script><script src="/assets/js/8.6f752a91.js" defer></script><script src="/assets/js/11.f2ac282b.js" defer></script><script src="/assets/js/7.a46ab4a3.js" defer></script><script src="/assets/js/27.104bd3b6.js" defer></script><script src="/assets/js/16.cc873b0d.js" defer></script>
  </body>
</html>
