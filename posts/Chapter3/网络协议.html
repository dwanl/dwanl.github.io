<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"
    />
    <title>网络协议 | 面试API</title>
    <meta name="description" content="前端面试API，自检清单，公众号推荐" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="网络协议 | 面试API" />
    <meta property="og:site_name" content="网络协议 | 面试API" />
    <meta property="og:locale" content="zh-CN" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="网络协议 | 面试API" />
    <link rel="shortut icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.5f1fa08a.css" as="style"><link rel="preload" href="/assets/js/app.e48c3d44.js" as="script"><link rel="preload" href="/assets/js/1.9aa2b147.js" as="script"><link rel="preload" href="/assets/js/6.ab6f709e.js" as="script"><link rel="preload" href="/assets/js/5.0f5d195d.js" as="script"><link rel="preload" href="/assets/js/8.b943e6ee.js" as="script"><link rel="preload" href="/assets/js/11.fb958432.js" as="script"><link rel="preload" href="/assets/js/7.a46ab4a3.js" as="script"><link rel="preload" href="/assets/js/52.651a2d94.js" as="script"><link rel="preload" href="/assets/js/16.f738196f.js" as="script"><link rel="prefetch" href="/assets/js/10.175139c9.js"><link rel="prefetch" href="/assets/js/12.85f229b3.js"><link rel="prefetch" href="/assets/js/13.96b776c5.js"><link rel="prefetch" href="/assets/js/14.e8a31a31.js"><link rel="prefetch" href="/assets/js/15.79c8d111.js"><link rel="prefetch" href="/assets/js/17.c9beec15.js"><link rel="prefetch" href="/assets/js/18.311c5248.js"><link rel="prefetch" href="/assets/js/19.6a1d7086.js"><link rel="prefetch" href="/assets/js/20.3e55f9ce.js"><link rel="prefetch" href="/assets/js/21.8d277f89.js"><link rel="prefetch" href="/assets/js/22.d1bd9642.js"><link rel="prefetch" href="/assets/js/23.7db4a8c3.js"><link rel="prefetch" href="/assets/js/24.1cb17e4b.js"><link rel="prefetch" href="/assets/js/25.e05bfa14.js"><link rel="prefetch" href="/assets/js/26.66417429.js"><link rel="prefetch" href="/assets/js/27.e37ba2d1.js"><link rel="prefetch" href="/assets/js/28.9981806c.js"><link rel="prefetch" href="/assets/js/29.0afdd99a.js"><link rel="prefetch" href="/assets/js/30.d9df9218.js"><link rel="prefetch" href="/assets/js/31.9f122e57.js"><link rel="prefetch" href="/assets/js/32.3be6e805.js"><link rel="prefetch" href="/assets/js/33.bc58239e.js"><link rel="prefetch" href="/assets/js/34.5b4ce795.js"><link rel="prefetch" href="/assets/js/35.d5108ab9.js"><link rel="prefetch" href="/assets/js/36.6b511d0c.js"><link rel="prefetch" href="/assets/js/37.94b94dfb.js"><link rel="prefetch" href="/assets/js/38.d1f5520c.js"><link rel="prefetch" href="/assets/js/39.f4548d5d.js"><link rel="prefetch" href="/assets/js/4.2b5d276e.js"><link rel="prefetch" href="/assets/js/40.81df4ece.js"><link rel="prefetch" href="/assets/js/41.5c15cc5a.js"><link rel="prefetch" href="/assets/js/42.94194640.js"><link rel="prefetch" href="/assets/js/43.f7be967b.js"><link rel="prefetch" href="/assets/js/44.b7364342.js"><link rel="prefetch" href="/assets/js/45.a5be72ef.js"><link rel="prefetch" href="/assets/js/46.5dd241ea.js"><link rel="prefetch" href="/assets/js/47.d59f707a.js"><link rel="prefetch" href="/assets/js/48.866defb6.js"><link rel="prefetch" href="/assets/js/49.98fdaefc.js"><link rel="prefetch" href="/assets/js/50.3e139586.js"><link rel="prefetch" href="/assets/js/51.3fcba8e1.js"><link rel="prefetch" href="/assets/js/53.892cbb93.js"><link rel="prefetch" href="/assets/js/54.32e1b9ce.js"><link rel="prefetch" href="/assets/js/55.2db2bfa6.js"><link rel="prefetch" href="/assets/js/56.1ac7678c.js"><link rel="prefetch" href="/assets/js/57.f744e726.js"><link rel="prefetch" href="/assets/js/58.0b48a602.js"><link rel="prefetch" href="/assets/js/59.6fd53a34.js"><link rel="prefetch" href="/assets/js/60.93edb351.js"><link rel="prefetch" href="/assets/js/61.1c5d6435.js"><link rel="prefetch" href="/assets/js/62.04e9e017.js"><link rel="prefetch" href="/assets/js/63.456f3577.js"><link rel="prefetch" href="/assets/js/64.a1c8d614.js"><link rel="prefetch" href="/assets/js/65.549a8c78.js"><link rel="prefetch" href="/assets/js/66.81658fbf.js"><link rel="prefetch" href="/assets/js/67.a7e6e80a.js"><link rel="prefetch" href="/assets/js/68.f119f6cf.js"><link rel="prefetch" href="/assets/js/69.79ea2aba.js"><link rel="prefetch" href="/assets/js/70.92112509.js"><link rel="prefetch" href="/assets/js/9.ba7c49dc.js"><link rel="prefetch" href="/assets/js/search.29d23745.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5f1fa08a.css">
  </head>
  <body>
    <div id="loader-wrapper" style="display: none;opacity:0">
      <div id="loader"></div>
      <div class="loader-section section-left"></div>
      <div class="loader-section section-right"></div>
    </div>
    <div id="app" data-server-rendered="true"><div data-v-8ae45032><section class="el-container" data-v-8ae45032><aside width="200px" class="el-aside menu" style="width:auto;" data-v-28ba16cc data-v-8ae45032><div class="brand-wrap" style="background-image:url(/aside.jpg);" data-v-28ba16cc><div class="brand" data-v-28ba16cc><a href="/" class="avatar waves-effect waves-circle waves-light router-link-active" data-v-28ba16cc><img src="/infoq1.png" data-v-28ba16cc></a> <hgroup class="introduce" data-v-28ba16cc><div class="nickname" data-v-28ba16cc><img src="/name.png" data-v-28ba16cc></div> <div data-v-28ba16cc><a title="253929992@qq.com" class="mail" data-v-28ba16cc>253929992@qq.com</a></div></hgroup></div></div> <ul role="menubar" class="menu-wrap el-menu" style="background-color:;" data-v-28ba16cc><li role="menuitem" aria-haspopup="true" aria-expanded="true" class="el-submenu is-opened" data-v-28ba16cc><div class="el-submenu__title" style="padding-left:20px;color:;background-color:;"><i class="iconfont icon-icon37" data-v-28ba16cc></i> <span slot="title" class="item-title" data-v-28ba16cc>自检清单</span><i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><ul role="menu" class="el-menu el-menu--inline" style="background-color:;"> <li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            JS基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            HTML&amp;CSS
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            计算机基础
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            数据结构和算法
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            运行环境
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            框架
          </span></li><li role="menuitem" tabindex="-1" default-active="1" class="el-menu-item" style="padding-left:40px;color:;background-color:;" data-v-28ba16cc><i class="el-icon-news" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
            工程化
          </span></li></ul></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-shijianzhou" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        时间轴
      </span></li><li role="menuitem" tabindex="-1" class="el-menu-item" style="padding-left:20px;color:;background-color:;" data-v-28ba16cc><i class="iconfont icon-guanyu" data-v-28ba16cc></i> <span class="item-title" data-v-28ba16cc>
        个人档案
      </span></li></ul></aside> <section class="el-container container-warp" data-v-8ae45032><header id="topHeader" class="el-header top-header" style="height:60px;padding-left:300px;" data-v-7e316482 data-v-8ae45032><div class="header-warp el-row is-align-center el-row--flex" data-v-7e316482><div class="el-col el-col-2 el-col-xs-7" data-v-7e316482><button type="button" class="el-button header-btn el-button--primary el-button--mini is-circle" data-v-7e316482><!----><!----><span><i class="iconfont icon-rightjustified" data-v-7e316482></i></span></button></div> <div class="el-col el-col-10 el-col-xs-24" data-v-7e316482><div aria-haspopup="listbox" role="combobox" aria-owns="el-autocomplete-1630" class="el-autocomplete search-input" data-v-7e316482><div class="el-input el-input--small el-input--suffix"><!----><input type="text" autocomplete="off" valueKey="value" popperClass="search-popper" placeholder="搜搜看" fetchSuggestions="function () { [native code] }" debounce="300" placement="bottom-start" popperAppendToBody="true" value="" class="el-input__inner"><!----><span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-input__icon el-icon-search search-ico" data-v-7e316482></i><!----></span><!----></span><!----></div><div role="region" class="el-autocomplete-suggestion el-popper search-popper" style="width:;display:none;"><div class="el-scrollbar"><div class="el-autocomplete-suggestion__wrap el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><ul class="el-scrollbar__view el-autocomplete-suggestion__list"></ul></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></div></div></div> <div class="nav-col el-col el-col-8 el-col-offset-10 el-col-xs-24" data-v-7e316482><ul role="menubar" class="header-menu el-menu--horizontal el-menu" style="background-color:transparent;" data-v-7e316482><li role="menuitem" tabindex="-1" class="el-menu-item" style="color:#fdf5ab;border-bottom-color:transparent;background-color:transparent;" data-v-7e316482>Home</li><li role="menuitem" tabindex="-1" class="el-menu-item is-active" style="color:#ffd04b;border-bottom-color:#ffd04b;background-color:transparent;" data-v-7e316482>Blog</li></ul></div></div></header> <main class="el-main my-main" style="margin-left:238px;" data-v-47f536a8 data-v-8ae45032><div class="content-header index-header" style="background-image:url(/banner.jpg);" data-v-1ba67baf data-v-47f536a8><div class="container" data-v-1ba67baf><h1 id="conentHeader" class="title animated fadeInDown" data-v-1ba67baf>网络协议</h1> <h5 class="subtitle" data-v-1ba67baf>最后更新时间：2019-12-04 14:39:50</h5> <div class="el-row is-align-center el-row--flex" data-v-47f536a8><div class="tag-card el-col el-col-20 el-col-xs-23 el-col-sm-22 el-col-md-22 el-col-lg-20" data-v-47f536a8><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>AST抽象语法树</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>网络协议</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>工具函数</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>vue生命周期</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>性能优化</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>闭包</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编译原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS渲染原理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>回流与重绘</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>判断数据类型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>this</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>执行上下文</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>高阶函数</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>浏览器缓存</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>HTML汇总</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>BFC</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Vue组件通信</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS盒模型</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS伪类</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>垂直居中</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>CSS选择器</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>三栏布局</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>实现轮子</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据结构</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>算法</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>TypeScript</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>项目构建</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>版本控制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>持续集成</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>开发提速</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>数据流管理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Nginx</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>编码能力</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>React</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>异常处理</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>基础问题</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>作用域</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>执行机制</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>正则表达式</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>类型转换</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>Symbol</span><span class="animated fadeInRight el-tag el-tag--medium is-hit" data-v-47f536a8>原型和原型链</span></div></div></div></div> <div data-v-3a18dd0a data-v-47f536a8 data-v-47f536a8><div class="post-content el-row is-justify-center el-row--flex" data-v-3a18dd0a><div id="post-card" class="post-card post-sign el-col el-col-16 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a><div class="content__default" data-v-3a18dd0a><h2 id="_1-理解什么是协议，了解-tcp-ip-网络协议族的构成，每层协议在应用程序中发挥的作用。"><a href="#_1-理解什么是协议，了解-tcp-ip-网络协议族的构成，每层协议在应用程序中发挥的作用。" aria-hidden="true" class="header-anchor">#</a> 1. 理解什么是协议，了解 TCP/IP 网络协议族的构成，每层协议在应用程序中发挥的作用。</h2> <h3 id="什么是协议？"><a href="#什么是协议？" aria-hidden="true" class="header-anchor">#</a> 什么是协议？</h3> <p>网络协议的简称，是通信计算机双方必须共同遵从的一组约定。如怎么样建立连接、怎么样互相识别等。只有遵守这个约定，计算机之间才能相互通信交流。它的三要素是：<code>语法</code>、<code>语义</code>、<code>时序</code>。</p> <p><strong>协议往往分成几个层次进行定义，分层定义是为了使某一层协议的改变不影响其他层次的协议。</strong></p> <p>协议也可以这样说，就是连入网络的计算机都要遵循的一定的技术规范，关于硬件、软件和端口等的技术规范。</p> <h3 id="tcp-ip-协议族的构成"><a href="#tcp-ip-协议族的构成" aria-hidden="true" class="header-anchor">#</a> TCP/IP 协议族的构成</h3> <p>网络协议通常分不同层次进行开发，每一层分别负责不同的通信功能。</p> <p>一个协议族，比如 <code>TCP/IP</code>，<strong>是一组不同层次上的多个协议的组合</strong>。</p> <p><code>TCP/IP</code> 通常被认为是一个四层协议系统：</p> <p><img src="https://qiniu.mdnice.com/4be513497d56a071fb7af71b628d0b5a.png" alt="TCP/IP"></p> <p>每一层负责不同的功能:</p> <ol><li><p><strong>链路层</strong></p> <p>有时也称作<code>数据链路层</code>或<code>网络接口层</code>，通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡。</p> <p>它们一起处理与电缆(或其他任何传输媒介)的物理接口细节。</p></li> <li><p><strong>网络层</strong></p> <p>有时也称作互联网层。处理分组在网络中的活动，例如分组的选路。</p> <p>在 <code>TCP/IP</code> 协议族中， 网络层协议包括：</p> <ul><li><code>IP</code> 协议 (网际协议)。</li> <li><code>ICMP</code> 协议(<code>Internet</code> 互联网控制报文协议)。</li> <li><code>IGMP</code> 协议(<code>Internet</code> 组管理协议)。</li></ul></li> <li><p><strong>运输层</strong></p> <p>主要为两台主机上的应用程序提供<strong>端到端</strong>的通信。</p> <p>在 <code>TCP/IP</code> 协议族中，有两个互不相同的传输协议: <code>TCP</code> (传输控制协议)和 <code>UDP</code> (用户数据报协议)。</p> <p><code>TCP</code> 为两台主机提供高可靠性的数据通信。它所做的工作包括把应用程序交给它的数据分成合适的小块交给下面的网络层，确认接收到的分组，设置发送最后确认分组的超时时钟等。由于运输层提供了高可靠性的端到端的通信，因此应用层可以忽略所有这些细节。</p> <p><code>UDP</code> 则为应用层提供一种非常简单的服务。**它只是把称作数据报的分组从一台主机发送到另一台主机，但并不保证该数据报能到达另一端。**任何必需的可靠性必须由应用层来提供。</p></li> <li><p><strong>应用层</strong></p> <p>负责处理特定的应用程序细节。</p> <p>几乎各种不同的 <code>TCP/IP</code> 实现都会提供下面这些通用的应用程序:</p> <ul><li><code>Telnet</code> 远程登录。</li> <li><code>FTP</code> 文件传输协议。</li> <li><code>SMTP</code> 简单邮件传送协议。</li> <li><code>SNMP</code> 简单网络管理协议。</li></ul></li></ol> <h2 id="_2-三次握手和四次挥手详细原理，为什么要使用这种机制。"><a href="#_2-三次握手和四次挥手详细原理，为什么要使用这种机制。" aria-hidden="true" class="header-anchor">#</a> 2. 三次握手和四次挥手详细原理，为什么要使用这种机制。</h2> <p>建立 <code>TCP</code> 连接需要三次握手，而断开连接则需要四次握手。整个过程如下图所示：</p> <p><img src="https://qiniu.mdnice.com/398da98e209e8e18ae3873f8112739cc.png" alt="TCP"></p> <h3 id="建立-tcp-连接（三次握手）"><a href="#建立-tcp-连接（三次握手）" aria-hidden="true" class="header-anchor">#</a> 建立 <code>TCP</code> 连接（三次握手）</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>SYN（Synchronize Sequence Numbers）同步序列编号。是 `TCP/IP` 建立连接时使用的握手信号。
ACK (Acknowledge character）确认字符，在数据通信中，接收站发给发送站的一种传输类控制字符。表示发来的数据已确认接收无误。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img alt="三次挥手" width="60%" src="https://qiniu.mdnice.com/2363554b36b5c238a3ec26a37a569f63.png"> <ol><li><p>第一次握手</p> <p>首先 <code>Client</code> 端发送连接请求报文。</p></li> <li><p>第二次握手</p> <p><code>Server</code> 端接收连接后回复 <code>ACK</code> 报文，并为这次连接分配数据资源。</p></li> <li><p>第三次握手</p> <p><code>Client</code> 端接收到 <code>ACK</code> 报文后也向 <code>Server</code> 段发生 <code>ACK</code> 报文，并分配资源。</p></li></ol> <p>这样TCP连接就建立了。</p> <h3 id="断开链接（四次挥手）"><a href="#断开链接（四次挥手）" aria-hidden="true" class="header-anchor">#</a> 断开链接（四次挥手）</h3> <blockquote><p>进行关闭的一方(即发送第一个 <code>FIN</code> )将执行主动关闭，而另一方(收到这个 <code>FIN</code>) 执行被动关闭。</p></blockquote> <p><img src="https://qiniu.mdnice.com/accd98707dd56831971c257ea2f32bc4.png" alt="四次挥手"></p> <ol><li><p>第一次挥手</p> <p><code>Client</code> 发送一个 <code>FIN</code>，用来关闭 <code>Client</code> 到 <code>Server</code> 的数据传送，<code>Client</code> 进入 <code>FIN_WAIT_1</code> 状态。</p></li> <li><p>第二次挥手</p> <p><code>Server</code> 收到 <code>FIN</code> 后，发送一个 <code>ACK</code> 给 <code>Client</code> ，确认序号为收到序号 <code>+1</code> （与 <code>SYN</code> 相同，一个 <code>FIN</code> 占用一个序号）， <code>Server</code> 进入 <code>CLOSE_WAIT</code> 状态。</p></li> <li><p>第三次挥手</p> <p><code>Server</code> 发送一个 <code>FIN</code> ，用来关闭 <code>Server</code> 到 <code>Client</code> 的数据传送， <code>Server</code> 进入 <code>LAST_ACK</code> 状态。</p></li> <li><p>第四次挥手</p> <p><code>Client</code> 收到 <code>FIN</code> 后， <code>Client</code> 进入 <code>TIME_WAIT</code> 状态，接着发送一个 <code>ACK</code> 给 <code>Server</code> ，确认序号为收到序号 <code>+1</code> ， <code>Server</code> 进入 <code>CLOSED</code> 状态，完成四次挥手。</p></li></ol> <h2 id="_3-dns-的作用、dns-解析的详细过程，dns优化原理。"><a href="#_3-dns-的作用、dns-解析的详细过程，dns优化原理。" aria-hidden="true" class="header-anchor">#</a> 3. DNS 的作用、DNS 解析的详细过程，DNS优化原理。</h2> <p><code>DNS</code> 是<strong>应用层协议</strong>，事实上他是为其他应用层协议工作的，包括不限于 <code>HTTP</code> 和 <code>SMTP</code> 以及 <code>FTP</code>，用于将用户提供的主机名解析为 <code>IP</code> 地址。</p> <p><code>DNS</code> 的获取流程：</p> <ol><li><p>用户主机上运行着 <code>DNS</code> 的客户端，（<code>PC</code> 机或者手机客户端运行着 <code>DNS</code> 客户端）。</p></li> <li><p>浏览器将接收到的 <code>URL</code> 中抽取出域名字段，就是访问的主机名，比如 <code>http://www.baidu.com/</code>，并将这个主机名传送给 <code>DNS</code> 应用的客户端。</p></li> <li><p><code>DNS</code> 客户机端向 <code>DNS</code> 服务器端发送一份查询报文，报文中包含着要访问的主机名字段（中间包括一些列缓存查询以及分布式 <code>DNS</code> 集群的工作）。</p></li> <li><p>该 <code>DNS</code> 客户机最终会收到一份回答报文，其中包含有该主机名对应的 <code>IP</code> 地址。</p></li> <li><p>一旦该浏览器收到来自 <code>DNS</code> 的 <code>IP</code> 地址，就可以向该 <code>IP</code> 地址定位的 <code>HTTP</code> 服务器发起 <code>TCP</code> 连接。</p></li></ol> <p><strong><code>IP</code> 地址的查询过程：</strong></p> <ol><li><p>浏览器缓存</p> <p>当用户通过浏览器访问某域名时，浏览器首先会在自己的缓存中查找是否有该域名对应的 <code>IP</code> 地址（若曾经访问过该域名且没有清空缓存便存在）。</p></li> <li><p>系统缓存</p> <p>当浏览器缓存中无域名对应 <code>IP</code> 则会自动检查用户计算机系统 <code>Hosts</code> 文件 <code>DNS</code> 缓存是否有该域名对应 <code>IP</code>。</p></li> <li><p>路由器缓存</p> <p>当浏览器及系统缓存中均无域名对应 <code>IP</code> 则进入路由器缓存中检查，以上三步均为客服端的 <code>DNS</code> 缓存。</p></li> <li><p><code>ISP</code>（互联网服务提供商）<code>DNS</code> 缓存</p> <p>当在用户客服端查找不到域名对应 <code>IP</code> 地址，则将进入 <code>ISP DNS</code> 缓存中进行查询。比如你用的是电信的网络，则会进入电信的 <code>DNS</code> 缓存服务器中进行查找。</p></li> <li><p>根域名服务器</p> <p>当以上均未完成，则进入根服务器进行查询。全球仅有 <code>13</code> 台根域名服务器，<code>1</code> 个主根域名服务器，其余 <code>12</code> 为辅根域名服务器。根域名收到请求后会查看区域文件记录，若无则将其管辖范围内顶级域名（如.com）服务器 <code>IP</code> 告诉本地 <code>DNS</code> 服务器。</p></li> <li><p>顶级域名服务器</p> <p>顶级域名服务器收到请求后查看区域文件记录，若无则将其管辖范围内主域名服务器的IP地址告诉本地 <code>DNS</code> 服务器。</p></li> <li><p>主域名服务器</p> <p>主域名服务器接受到请求后查询自己的缓存，如果没有则进入下一级域名服务器进行查找，并重复该步骤直至找到正确纪录。</p></li> <li><p>保存结果至缓存</p> <p>本地域名服务器把返回的结果保存到缓存，以备下一次使用，同时将该结果反馈给客户端，客户端通过这个 <code>IP</code> 地址与 <code>HTTP</code> 服务器建立 <code>TCP</code> 链接。</p></li></ol> <h2 id="_4-cdn-的作用和原理。"><a href="#_4-cdn-的作用和原理。" aria-hidden="true" class="header-anchor">#</a> 4. CDN 的作用和原理。</h2> <h3 id="什么是-cdn"><a href="#什么是-cdn" aria-hidden="true" class="header-anchor">#</a> 什么是 CDN ?</h3> <blockquote><p>内容分发网络（<code>CDN</code>）是指一种通过互联网互相连接的计算机网络系统，利用最靠近每位用户的服务器，更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户。</p></blockquote> <p><strong><code>CDN</code> 系统主要由 <code>4</code> 大部分组成，每部分都由集群所构成。这 <code>4</code> 部分分别是：</strong></p> <ul><li><code>CDN</code> 专属 <code>DNS</code> 服务器。</li> <li>全局负载均衡设备。</li> <li>区域负载均衡设备。</li> <li><code>CDN</code> 缓存服务器（边缘节点）。</li></ul> <p>除了 <code>CDN</code> 专属 <code>DNS</code> 服务器，其他 <code>3</code> 部分集群都有源服务器上对应资源的全部或部分副本。</p> <p><code>CDN</code> 系统通过各部分的负载均衡算法，最终指示客户端使用附近最优的边缘节点中的一台缓存服务器作为服务端，从而提高 <code>Web</code> 应用的性能。</p> <h3 id="cdn-的基本工作过程"><a href="#cdn-的基本工作过程" aria-hidden="true" class="header-anchor">#</a> CDN 的基本工作过程</h3> <p><strong>在传统的 <code>Web</code> 模型中，发出请求后一般要经过如下几个步骤：</strong></p> <ol><li>用户在自己的浏览器中输入要访问的网站域名 <code>URL</code>。</li> <li>浏览器向本地 <code>DNS</code> 服务器请求对该域名的解析。</li> <li>本地 <code>DNS</code> 服务器中如果缓存有这个域名的解析结果，则直接响应用户的解析请求。</li> <li>本地 <code>DNS</code> 服务器中如果没有关于这个域名的解析结果的缓存，则以迭代方式向整个 <code>DNS</code> 系统请求解析，获得应答后将结果反馈给浏览器。</li> <li>浏览器得到域名解析结果，就是该域名相应的服务设备的 <code>IP</code> 地址 。</li> <li>浏览器获取 <code>IP</code> 地址之后，经过标准的 <code>TCP</code> 握手流程，建立 <code>TCP</code> 连接。</li> <li>浏览器向服务器发起 <code>HTTP</code> 请求。</li> <li>服务器将用户请求内容传送给浏览器。</li> <li>经过标准的 <code>TCP</code> 挥手流程，断开 <code>TCP</code> 连接。</li></ol> <p><strong>在网站和用户之间加入 <code>CDN</code> 以后，用户不会有任何与原来不同的感觉。从宏观上来看，一个典型的 <code>CDN</code> 用户访问调度流程如下：</strong></p> <ol><li><p>当用户点击网站页面上的内容 <code>URL</code>，先经过本地 <code>DNS</code> 系统解析，如果本地 <code>DNS</code> 服务器没有相应域名的缓存，则本地 <code>DNS</code> 系统会将域名的解析权交给 <code>CNAME</code> 指向的 <code>CDN</code> 专用 <code>DNS</code> 服务器。</p></li> <li><p><strong><code>CDN</code> 的 <code>DNS</code> 服务器</strong>将 <code>CDN</code> 的全局负载均衡设备 <code>IP</code> 地址返回给用户。</p></li> <li><p>用户向 <code>CDN</code> 的全局负载均衡设备发起 <code>URL</code> 访问请求。</p></li> <li><p><code>CDN</code> 全局负载均衡设备根据用户 <code>IP</code> 地址，以及用户请求的 <code>URL</code>，选择一台用户所属区域的区域负载均衡设备，并将请求转发到此设备上。</p></li> <li><p>基于以下这些条件的综合分析之后，区域负载均衡设备会选择一个最优的缓存服务器节点，并从缓存服务器节点处得到缓存服务器的 <code>IP</code> 地址，最终将得到的IP地址返回给全局负载均衡设备。</p> <ul><li><p>根据用户 <code>IP</code> 地址，判断哪一个边缘节点距用户最近。</p></li> <li><p>根据用户所请求的 <code>URL</code> 中携带的内容名称，判断哪一个边缘节点上有用户所需内容。</p></li> <li><p>查询各个边缘节点当前的负载情况，判断哪一个边缘节点尚有服务能力。</p></li></ul></li> <li><p>全局负载均衡设备把服务器的IP地址返回给用户。</p></li> <li><p>用户向缓存服务器发起请求，缓存服务器响应用户请求，将用户所需内容传送到用户终端。如果这台缓存服务器上并没有用户想要的内容，而区域均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉到本地。</p></li></ol> <p><code>CDN</code> 全局负载均衡设备与 <code>CDN</code> 区域负载均衡设备根据用户 <code>IP</code> 地址，将域名解析成相应节点中缓存服务器的 <code>IP</code> 地址，实现用户就近访问，从而提高服务端响应内容的速度。</p> <p>理论上，最简单的 <code>CDN</code> 网络只有一个 <code>CDN</code> 专用 <code>DNS</code> 服务器，一个全局负载均衡设备，然后各节点一台缓存服务器，即可运行。</p> <h2 id="_5-http-请求报文和响应报文的具体组成，能理解常见请求头的含义，有几种请求方式，区别是什么？"><a href="#_5-http-请求报文和响应报文的具体组成，能理解常见请求头的含义，有几种请求方式，区别是什么？" aria-hidden="true" class="header-anchor">#</a> 5. HTTP 请求报文和响应报文的具体组成，能理解常见请求头的含义，有几种请求方式，区别是什么？</h2> <h2 id="_6-http-所有状态码的具体含义，看到异常状态码能快速定位问题。"><a href="#_6-http-所有状态码的具体含义，看到异常状态码能快速定位问题。" aria-hidden="true" class="header-anchor">#</a> 6. HTTP 所有状态码的具体含义，看到异常状态码能快速定位问题。</h2> <h2 id="_7-http1-1、http2-0-带来的改变。"><a href="#_7-http1-1、http2-0-带来的改变。" aria-hidden="true" class="header-anchor">#</a> 7. HTTP1.1、HTTP2.0 带来的改变。</h2> <h2 id="_8-https-的加密原理，如何开启-https，如何劫持-https-请求。"><a href="#_8-https-的加密原理，如何开启-https，如何劫持-https-请求。" aria-hidden="true" class="header-anchor">#</a> 8. HTTPS 的加密原理，如何开启 HTTPS，如何劫持 HTTPS 请求。</h2> <h2 id="_9-理解-websocket-协议的底层原理、与-http-的区别。"><a href="#_9-理解-websocket-协议的底层原理、与-http-的区别。" aria-hidden="true" class="header-anchor">#</a> 9. 理解 WebSocket 协议的底层原理、与 HTTP 的区别。</h2></div> <span id="footerPost" data-v-3a18dd0a></span></div> <div id="post-toc" class="post-toc el-col el-col-6" data-v-3a18dd0a><div class="catalog-body" data-v-3a18dd0a><h4 class="catalog-title" data-v-3a18dd0a>目录</h4> <ul id="catalog-list" class="catalog-list" data-v-3a18dd0a></ul></div></div></div> <div class="el-row is-justify-center el-row--flex" data-v-3a18dd0a><div class="post-card vssue-wrap el-col el-col-21 el-col-xs-24 el-col-sm-23 el-col-md-23 el-col-lg-16" data-v-3a18dd0a></div></div> <div class="post-nav el-row is-justify-space-around el-row--flex" data-v-3a18dd0a><div class="post-prev el-col el-col-7" data-v-3a18dd0a><div data-v-3a18dd0a><a href="/posts/Chapter3/ast.html" data-v-3a18dd0a><i class="el-icon-arrow-left" data-v-3a18dd0a></i> Prev
        </a> <p class="nav-title" data-v-3a18dd0a>AST抽象语法树</p></div></div> <div class="post-next el-col el-col-7 el-col-lg-pull-5" data-v-3a18dd0a><div data-v-3a18dd0a><a href="/posts/Chapter1/%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0.html" data-v-3a18dd0a>
          Next
          <i class="el-icon-arrow-right" data-v-3a18dd0a></i></a> <p class="nav-title" data-v-3a18dd0a>工具函数</p></div></div></div> <span data-v-3f1acc1c data-v-3a18dd0a><button type="button" class="el-button toc-btn el-button--primary el-button--mini is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-tickets" data-v-3f1acc1c></i></span></button> <button type="button" class="el-button gotop-btn el-button--primary is-circle" data-v-3f1acc1c><!----><!----><span><i class="el-icon-arrow-up" data-v-3f1acc1c></i></span></button></span></div></main></section> <button type="button" class="el-button gotop-btn el-button--primary is-circle" style="display:none;" data-v-1918517c data-v-8ae45032><!----><!----><span><i class="el-icon-arrow-up" data-v-1918517c></i></span></button></section> <div class="overlay" data-v-8ae45032></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e48c3d44.js" defer></script><script src="/assets/js/1.9aa2b147.js" defer></script><script src="/assets/js/6.ab6f709e.js" defer></script><script src="/assets/js/5.0f5d195d.js" defer></script><script src="/assets/js/8.b943e6ee.js" defer></script><script src="/assets/js/11.fb958432.js" defer></script><script src="/assets/js/7.a46ab4a3.js" defer></script><script src="/assets/js/52.651a2d94.js" defer></script><script src="/assets/js/16.f738196f.js" defer></script>
  </body>
</html>
