(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{335:function(t,a,s){"use strict";s.r(a);var n=s(17),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"网站优化实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网站优化实践","aria-hidden":"true"}},[t._v("#")]),t._v(" 网站优化实践")]),t._v(" "),s("p",[t._v("转载自: "),s("a",{attrs:{href:"http://jartto.wang/2019/02/16/web-optimization/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jartto's blog"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("网站优化是前端开发的重中之重，但是优化细节却十分繁杂，没有好的思路，优化很难高效的开展。")]),t._v(" "),s("p",[t._v("本文将以实际网站来做参考，手把手教你如何一步步做好网站优化。")]),t._v(" "),s("p",[t._v("这不是一篇 "),s("strong",[t._v("基础网站优化")]),t._v(" 文章，继续下文前，请确定已经做了如下基本优化：")]),t._v(" "),s("ol",[s("li",[t._v("图片压缩、合并")]),t._v(" "),s("li",[t._v("代码精简、混淆")]),t._v(" "),s("li",[t._v("减少 "),s("code",[t._v("iframe")]),t._v(" 使用")]),t._v(" "),s("li",[t._v("避免图片 "),s("code",[t._v("src")]),t._v(" 为空")]),t._v(" "),s("li",[t._v("减少 "),s("code",[t._v("HTTP")]),t._v(" 请求数")]),t._v(" "),s("li",[t._v("避免重定向")]),t._v(" "),s("li",[t._v("样式表放页头、脚本放底部")]),t._v(" "),s("li",[t._v("…")])]),t._v(" "),s("h2",{attrs:{id:"优化的意义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化的意义","aria-hidden":"true"}},[t._v("#")]),t._v(" 优化的意义")]),t._v(" "),s("p",[t._v("我们可以从两个角度来看这个问题：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("用户角度\n网站优化能够让页面加载得更快，响应更加及时，极大提升用户体验。")])]),t._v(" "),s("li",[s("p",[t._v("服务商角度\n优化会减少页面资源请求数，减小请求资源所占带宽大小，从而节省可观的带宽资源。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("网站优化的目标是：减少网站加载时间，提高响应速度。")])]),t._v(" "),s("p",[t._v("那么网站加载速度和用户体验又有着怎样的关系呢？我们来看下面这张图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/390751f871d33b0b206be13880926119.png",alt:"性能优化"}})]),t._v(" "),s("p",[t._v("Google 和亚马逊的研究表明，Google 页面加载的时间从 "),s("code",[t._v("0.4")]),t._v(" 秒提升到 "),s("code",[t._v("0.9")]),t._v(" 秒导致丢失了 "),s("code",[t._v("20%")]),t._v(" 流量和广告收入，对于亚马逊，页面加载时间每增加 "),s("code",[t._v("100ms")]),t._v(" 就意味着 "),s("code",[t._v("1%")]),t._v(" 的销售额损失。")]),t._v(" "),s("blockquote",[s("p",[t._v("可见，页面的加载速度对于用户有着至关重要的影响。")])]),t._v(" "),s("p",[t._v("一个好的交互效果可能是这样的：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/1a3a8cd970c4e1fa5c8e82740d12399c.png",alt:"性能优化"}})]),t._v(" "),s("h2",{attrs:{id:"分析网站性能瓶颈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分析网站性能瓶颈","aria-hidden":"true"}},[t._v("#")]),t._v(" 分析网站性能瓶颈")]),t._v(" "),s("h5",{attrs:{id:"_1-打包文件大小"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-打包文件大小","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 打包文件大小")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/f6ca4e1ea0641ffeb15660a121aa5383.png",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"_2-打包文件目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-打包文件目录","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 打包文件目录")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".\n├── favicon.ico\n├── index.html\n├── manifest.json\n├── static\n│   ├── DIN-Medium.1bbe3460.otf\n│   ├── DIN-Regular.799221d7.otf\n│   └── logo.c57d38d0.png\n├── umi.css\n├── umi.css.map\n├── umi.js\n└── umi.js.map\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("blockquote",[s("p",[t._v("需要注意：生产环境不要开启 SOURCEMAP")])]),t._v(" "),s("h5",{attrs:{id:"_3-静态资源加载时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-静态资源加载时间","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 静态资源加载时间")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/83d7b1fd4f07630355fcf448be5c0e18.png",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"_4-资源瀑布-waterfall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-资源瀑布-waterfall","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 资源瀑布 "),s("code",[t._v("Waterfall")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/b789eb64bf23ae483ae1f745b0fa1cf9.png",alt:"waterfall"}})]),t._v(" "),s("p",[s("code",[t._v("TTFB")]),t._v(" 全称 "),s("code",[t._v("Time To First Byte")]),t._v("：是指"),s("strong",[t._v("网络请求被发起到从服务器接收到第一个字节的这段时间")]),t._v("，它包含了 "),s("code",[t._v("TCP")]),t._v(" 连接时间、发送 "),s("code",[t._v("HTTP")]),t._v(" 请求时间和获得响应消息第一个字节的时间。")]),t._v(" "),s("blockquote",[s("p",[t._v("Content Download：即下载内容所需要的时间。")])]),t._v(" "),s("p",[t._v("页面一接口情况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/8e870ed1f77dd3379517dd374845d5a3.png",alt:""}})]),t._v(" "),s("p",[t._v("页面二接口情况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/b87c0ac96e784b75e524fd1e07816651.png",alt:""}})]),t._v(" "),s("p",[t._v("用户下载内容所需要的时间，受限于服务器的资源、资源的大小以及用户的网络速度。因此，我们暂时不讨论这方面的内容。")]),t._v(" "),s("h6",{attrs:{id:"_5-分析工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-分析工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. 分析工具")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("webpack")]),t._v(" 打包，分析一下大文件构成。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/ae512be364e295fc08b74be6dbd285da.png",alt:""}})]),t._v(" "),s("p",[t._v("6."),s("code",[t._v("YSlo")]),t._v("w 或者 "),s("code",[t._v("PageSpeed")])]),t._v(" "),s("p",[t._v("我们可以通过 "),s("code",[t._v("Google PageSpeed Insights API Extension")]),t._v(" 来对网站整体性能 做一下评估，按照建议去做一些高效优化。")]),t._v(" "),s("p",[t._v("加载时间概况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/4bbb11f789c681d925a05d35e250248c.png",alt:""}})]),t._v(" "),s("p",[t._v("影响网站加载因素：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/d99888202d6deb3cb2e081c739c3c750.png",alt:""}})]),t._v(" "),s("p",[t._v("缓存策略问题：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/3b5ca6726c09238eb0dbf3764b35f040.png",alt:""}})]),t._v(" "),s("p",[t._v("DOM 节点：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/f8eb467c5249c3571f019255d404cb05.png",alt:""}})]),t._v(" "),s("p",[t._v("关键路径：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/24fc24c0cc8b0ed9010de7a0bff22e3a.png",alt:""}})]),t._v(" "),s("p",[t._v("主线程情况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/f0e853684275c330497b63ffbefee85c.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"通过策略解决问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过策略解决问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 通过策略解决问题")]),t._v(" "),s("h5",{attrs:{id:"_1-favicon-ico-404-问题-✓"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-favicon-ico-404-问题-✓","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. favicon.ico 404 问题 ✓")]),t._v(" "),s("h5",{attrs:{id:"_2-去除调试工具代码-eruda，线上环境是不需要的-✓"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-去除调试工具代码-eruda，线上环境是不需要的-✓","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 去除调试工具代码 "),s("code",[t._v("eruda")]),t._v("，线上环境是不需要的 ✓")]),t._v(" "),s("h5",{attrs:{id:"_3-图片合并或者多个-svg-✓"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-图片合并或者多个-svg-✓","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 图片合并或者多个 "),s("code",[t._v("svg")]),t._v(" ✓")]),t._v(" "),s("p",[t._v("建议使用 "),s("code",[t._v("webpack-spritesmith")]),t._v("，简单使用如下：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpritesmithPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cwd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/ico'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        glob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.png'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/spritesmith-generated/jartto.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/spritesmith-generated/jartto.styl'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    apiOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cssImageRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~jartto.png"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h5",{attrs:{id:"_4-大文件拆分-✓"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-大文件拆分-✓","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 大文件拆分 ✓")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/37d42de035133a144328ea8f9b1f2c5d.png",alt:""}})]),t._v(" "),s("p",[t._v("从上图分析得出，大文件主要包含："),s("code",[t._v("dist.js")]),t._v("、"),s("code",[t._v("lottie.js")]),t._v("、"),s("code",[t._v("lodash.js")]),t._v("、"),s("code",[t._v("loading.json")]),t._v(" 等文件。所以我们从这几个文件入手，逐个优化：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("moment.js")]),t._v(" - 配置 "),s("code",[t._v("moment")]),t._v(" 忽略本地化，可减少 "),s("code",[t._v("70kb")])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ignoreMomentLocale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("p",[s("code",[t._v("dist.js")]),t._v(" - 在给单页应用做按需加载优化时，一般采用以下原则：")]),t._v(" "),s("ol",[s("li",[t._v("把整个网站划分成一个个小功能，再按照每个功能的相关程度把它们分成几类。")]),t._v(" "),s("li",[t._v("把每一类合并为一个 "),s("code",[t._v("Chunk")]),t._v("，按需加载对应的 "),s("code",[t._v("Chunk")]),t._v("。")]),t._v(" "),s("li",[t._v("对于用户首次打开你的网站时需要看到的画面所对应的功能，不要对它们做按需加载，而是放到执行入口所在的 "),s("code",[t._v("Chunk")]),t._v(" 中，以降低用户能感知的网页加载时间。")]),t._v(" "),s("li",[t._v("对于个别依赖大量代码的功能点，例如依赖 "),s("code",[t._v("Chart.js")]),t._v(" 去画图表、依赖 "),s("code",[t._v("flv.js")]),t._v(" 去播放视频的功能点，可再对其进行按需加载。")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("lottie.js")]),t._v(" - 分离减少 "),s("code",[t._v("60kb")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("externals"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lottie "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-lottie'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("lodash.js")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("externals: {\nlodash : {\n    commonjs: 'lodash',\n    amd: 'lodash',\n    root: '_' // indicates global variable\n}\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("动态导入以及文件拆分")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("dynamicImport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    webpackChunkName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    loadingComponent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/Loading/jartto.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])])]),t._v(" "),s("p",[t._v("按照上面我们一步步处理后，重新打包分析一下文件构成：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/3d5ea574ce9975900633749f12c4bcd8.png",alt:""}})]),t._v(" "),s("p",[t._v("这里为什么没有继续拆分 "),s("code",[t._v("dist.js")]),t._v("，是因为目前阶段没有好的方案，需要对代码做很多调整，所以暂且保留。相关信息可以在 "),s("code",[t._v("Ant-Design Issuse")]),t._v(" "),s("a",{attrs:{href:"https://github.com/ant-design/ant-design/issues/12011",target:"_blank",rel:"noopener noreferrer"}},[t._v("Svg icons make bunlde size too large"),s("OutboundLink")],1),t._v(" 中查看解决方案。")]),t._v(" "),s("h5",{attrs:{id:"_5-存放-cdn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-存放-cdn","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. 存放 "),s("code",[t._v("CDN")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("loading.json")]),t._v(" 大小54kb ✓")]),t._v(" "),s("li",[s("code",[t._v("svg")]),t._v(" 替换 "),s("code",[t._v("2")]),t._v(" 倍图 ✓")]),t._v(" "),s("li",[t._v("删除项目冗余图片 ✓")])]),t._v(" "),s("h5",{attrs:{id:"_6-优化-ttfb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-优化-ttfb","aria-hidden":"true"}},[t._v("#")]),t._v(" 6. 优化 "),s("code",[t._v("TTFB")])]),t._v(" "),s("ul",[s("li",[t._v("减少 "),s("code",[t._v("DNS")]),t._v(" 查询")]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("CDN")])]),t._v(" "),s("li",[t._v("提早 "),s("code",[t._v("Flush")])]),t._v(" "),s("li",[t._v("添加周期头")])]),t._v(" "),s("h5",{attrs:{id:"_7-移除阻塞渲染的资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-移除阻塞渲染的资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 7. 移除阻塞渲染的资源")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("css")]),t._v(" 预加载 "),s("code",[t._v("preload")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("异步加载第三方资源")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://cdn.jartto.wang/fastclick.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("没有 "),s("code",[t._v("async")]),t._v(" 属性，"),s("code",[t._v("script")]),t._v(" 将立即获取（下载）并执行，期间阻塞了浏览器的后续处理。\n如果有 "),s("code",[t._v("async")]),t._v(" 属性，那么 "),s("code",[t._v("script")]),t._v(" 将被异步下载并执行，同时浏览器继续后续的处理。")])])]),t._v(" "),s("h5",{attrs:{id:"_8-确保文本在网页字体加载期间保持可见状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-确保文本在网页字体加载期间保持可见状态","aria-hidden":"true"}},[t._v("#")]),t._v(" 8. 确保文本在网页字体加载期间保持可见状态")]),t._v(" "),s("p",[t._v("利用 "),s("code",[t._v("font-display")]),t._v(" 这项 "),s("code",[t._v("CSS")]),t._v(" 功能，确保文本在网页字体加载期间始终对用户可见。")]),t._v(" "),s("div",{staticClass:"language-css line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@font-face")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Arvo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" auto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("local")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Arvo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token url"}},[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("https://fonts.jartto.wang/fonts/temp.woff2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'woff2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h5",{attrs:{id:"_9-采用高效的缓存策略提供静态资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-采用高效的缓存策略提供静态资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 9.采用高效的缓存策略提供静态资源")]),t._v(" "),s("blockquote",[s("p",[t._v("延长缓存期限可加快重访网页的速度。")])]),t._v(" "),s("p",[s("code",[t._v("DNS TTL(Time-To-Live)")]),t._v(" 简单的说："),s("strong",[t._v("它表示一条域名解析记录在 "),s("code",[t._v("DNS")]),t._v(" 服务器上的缓存时间。")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("当各地的 "),s("code",[t._v("DNS")]),t._v(" 服务器接受到解析请求时，就会向域名指定的 "),s("code",[t._v("DNS")]),t._v(" 服务器发出解析请求从而获得解析记录。")])]),t._v(" "),s("li",[s("p",[t._v("在获得这个记录之后，记录会在 "),s("code",[t._v("DNS")]),t._v(" 服务器中保存一段时间，这段时间内如果再接到这个域名的解析请求，"),s("code",[t._v("DNS")]),t._v(" 服务器将不再向 "),s("code",[t._v("DNS")]),t._v(" 服务器发出请求，而是直接返回刚才获得的记录。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("这个记录在 "),s("code",[t._v("DNS")]),t._v(" 服务器上保留的时间，就是 "),s("code",[t._v("TTL")]),t._v(" 值。")])]),t._v(" "),s("p",[t._v("所以一般更新域名解析的步骤如下：")]),t._v(" "),s("ul",[s("li",[t._v("先查看域名当前的 "),s("code",[t._v("TTL")]),t._v(" 值。")]),t._v(" "),s("li",[t._v("修改 "),s("code",[t._v("TTL")]),t._v(" 值为可设定的最小值，建议为 "),s("code",[t._v("60")]),t._v(" 秒。")]),t._v(" "),s("li",[t._v("等待一天，保证各地的 "),s("code",[t._v("DNS")]),t._v(" 服务器缓存都过期并更新了记录。")]),t._v(" "),s("li",[t._v("设置修改 "),s("code",[t._v("DNS")]),t._v(" 解析到新的记录，这个时候各地的 "),s("code",[t._v("DNS")]),t._v(" 就能以最快的速度更新到新的记录。")]),t._v(" "),s("li",[t._v("确认各地的 "),s("code",[t._v("DNS")]),t._v(" 已经更新完成后，再 "),s("code",[t._v("TTL")]),t._v(" 值设置成常用的值（如: "),s("code",[t._v("TTL=86400")]),t._v("）。")])]),t._v(" "),s("p",[t._v("如下图，"),s("code",[t._v("TTL")]),t._v(" 值设置的最佳实践，可供参考：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/9e8e0df4be75d8f3c38c87272b09248d.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("后文我们会详细介绍 "),s("code",[t._v("DNS")]),t._v(" 相关内容，欢迎各位童鞋关注。")])]),t._v(" "),s("h5",{attrs:{id:"_10-避免-dom-规模过大"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-避免-dom-规模过大","aria-hidden":"true"}},[t._v("#")]),t._v(" 10. 避免 "),s("code",[t._v("DOM")]),t._v(" 规模过大")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("网页包含的 "),s("code",[t._v("DOM")]),t._v(" 节点最好少于 "),s("code",[t._v("1500")]),t._v(" 个左右。")])]),t._v(" "),s("li",[s("p",[t._v("理想状况是，树深度少于 "),s("code",[t._v("32")]),t._v(" 个元素，且少于 "),s("code",[t._v("60")]),t._v(" 个子/父元素。")])]),t._v(" "),s("li",[s("p",[t._v("大型 "),s("code",[t._v("DOM")]),t._v(" 可能会增加内存使用量、导致样式计算用时延长并产生高昂的布局重排费用。")])])]),t._v(" "),s("h5",{attrs:{id:"_11-最大限度地缩短关键请求深度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-最大限度地缩短关键请求深度","aria-hidden":"true"}},[t._v("#")]),t._v(" 11. 最大限度地缩短关键请求深度")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("关键请求链")]),t._v(" 显示了以高优先级加载的资源。")])]),t._v(" "),s("p",[t._v("我们可以通过：缩短链长、缩减资源的下载文件大小，或者推迟下载不必要的资源，从而提高网页加载速度。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/d3e58cb28ee2bb2b482934fd847b2628.png",alt:""}})]),t._v(" "),s("p",[t._v("当 "),s("code",[t._v("HTML")]),t._v(" 解析过程中遇到一个 "),s("code",[t._v("script")]),t._v(" 标记时，它会暂停 "),s("code",[t._v("DOM")]),t._v(" 构建，将控制权移交给 "),s("code",[t._v("JavaScript")]),t._v(" 引擎，等 "),s("code",[t._v("JavaScript")]),t._v(" 引擎运行完毕，浏览器再从中断的地方恢复 "),s("code",[t._v("DOM")]),t._v(" 构建。")]),t._v(" "),s("blockquote",[s("p",[t._v("也就是说，执行内联的 JavaScript 会阻塞页面的首次渲染。")])]),t._v(" "),s("p",[t._v("在关键渲染路径中，我们通常要关注三个点：")]),t._v(" "),s("ul",[s("li",[t._v("页面首次渲染需要的关键资源数量。")]),t._v(" "),s("li",[t._v("关键资源的大小。")]),t._v(" "),s("li",[t._v("关键渲染路径的往返次数（"),s("code",[t._v("Roundtrip")]),t._v("）。")])]),t._v(" "),s("blockquote",[s("p",[t._v("我们的策略也非常简单，就是减少关键资源数量，降低资源大小，减少关键路径的往返次数。")])]),t._v(" "),s("p",[t._v("优化关键渲染路径的常规步骤如下：")]),t._v(" "),s("ol",[s("li",[t._v("对关键路径进行分析和特性描述：资源数、字节数、长度。")]),t._v(" "),s("li",[t._v("最大限度减少关键资源的数量：删除它们，延迟它们的下载，将它们标记为异步等。")]),t._v(" "),s("li",[t._v("优化关键字节数以缩短下载时间（往返次数）。")]),t._v(" "),s("li",[t._v("优化其余关键资源的加载顺序：您需要尽早下载所有关键资源，以缩短关键路径长度。")])]),t._v(" "),s("p",[t._v("更多详情，请参考"),s("a",{attrs:{href:"https://segmentfault.com/a/1190000013767948",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化—关键渲染路径"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h5",{attrs:{id:"_12-最大限度地减少主线程工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-最大限度地减少主线程工作","aria-hidden":"true"}},[t._v("#")]),t._v(" 12. 最大限度地减少主线程工作")]),t._v(" "),s("p",[t._v("考虑减少为解析、编译和执行 "),s("code",[t._v("JS")]),t._v(" 而花费的时间。我们可以提供较小的 "),s("code",[t._v("JS")]),t._v(" 负载来实现此目标。")]),t._v(" "),s("h5",{attrs:{id:"_13-最优配置-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-最优配置-nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" 13. 最优配置 "),s("code",[t._v("nginx")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("gzip")]),t._v(" 配置")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("gzip  on;\ngzip_min_length  1k;\ngzip_buffers     4 8k;\ngzip_http_version 1.1;\ngzip_comp_level 4;\ngzip_types text/plain text/css application/json image/png image/x-icon application/javascript application/x-javascript text/javascript text/xml application/xml application/xml+rss text/cache-manifest application/octet-stream;\ngzip_vary on;\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[s("code",[t._v("nginx")]),t._v(" 开启缓存")])]),t._v(" "),s("p",[t._v("如果你对浏览器缓存还不太清楚，欢迎移步聊一聊浏览器缓存机制。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("htm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("js"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("css"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("gif"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("jpeg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("png"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("bmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("swf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("ico"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("json"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("otf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  root "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jartto_web"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  index index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  expires "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("blockquote",[s("p",[s("code",[t._v("Nginx")]),t._v(" 能非常有效地直接处理静态内容。在静态文件和 "),s("code",[t._v("Nginx")]),t._v(" 在同一主机的情况下，这种特性尤为有用。")])]),t._v(" "),s("h2",{attrs:{id:"效果如何？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#效果如何？","aria-hidden":"true"}},[t._v("#")]),t._v(" 效果如何？")]),t._v(" "),s("blockquote",[s("p",[t._v("优化前：网站评分 27 ，首次内容绘制 6.9\b 秒")])]),t._v(" "),s("p",[t._v("网站评分：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/ecd524b4a8b5c89b8734d2cd04ddf7f3.png",alt:"网站评分"}})]),t._v(" "),s("p",[t._v("加载概况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/738d9f51faaa8587ae119ca2bc4c7220.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("优化后：网站评分 70 ，首次内容绘制 1.6 秒")])]),t._v(" "),s("p",[t._v("网站评分：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/24aab2e3d64a26560eb6106885c1087b.png",alt:""}})]),t._v(" "),s("p",[t._v("加载概况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/0b0264fdadf80ea3a5735a3802d12e95.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("当然，优化还可以做更多，我们尽量让网站的评分接近 100 分，譬如：")])]),t._v(" "),s("p",[t._v("网站评分：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/432bea1804a1f3a4569fc748bb4a10e6.png",alt:""}})]),t._v(" "),s("p",[t._v("加载概况：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qiniu.mdnice.com/88fa9e000b6fe2ec6ccfae530058c920.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("我们从头优化下来，做了不少代码改动，也达到了不错的效果。但是有几点还是需要注意：")]),t._v(" "),s("h5",{attrs:{id:"_1-尽可能减少白屏出现时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-尽可能减少白屏出现时间","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 尽可能减少白屏出现时间")]),t._v(" "),s("p",[t._v("骨架图解决 "),s("code",[t._v("webview")]),t._v(" 加载页面过长的白屏过程。")]),t._v(" "),s("h5",{attrs:{id:"_2-关注整站性能，如-ttfb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-关注整站性能，如-ttfb","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 关注整站性能，如 "),s("code",[t._v("TTFB")])]),t._v(" "),s("p",[t._v("服务端接口也需要同步优化，而不要仅仅依赖前端单方面优化。")]),t._v(" "),s("h5",{attrs:{id:"_3-按照使用情况加载优先使用的资源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-按照使用情况加载优先使用的资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 按照使用情况加载优先使用的资源")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("css")]),t._v(" 预加载")]),t._v(" "),s("li",[s("code",[t._v("font")]),t._v(" 预加载")]),t._v(" "),s("li",[s("code",[t._v("js")]),t._v(" 预加载")]),t._v(" "),s("li",[t._v("图片懒加载")])]),t._v(" "),s("h5",{attrs:{id:"_4-高效利用-dns-和-cdn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-高效利用-dns-和-cdn","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 高效利用 "),s("code",[t._v("DNS")]),t._v(" 和 "),s("code",[t._v("CDN")])]),t._v(" "),s("ul",[s("li",[t._v("增加缓存时间")]),t._v(" "),s("li",[s("code",[t._v("DNS")]),t._v(" 预解析")])]),t._v(" "),s("p",[t._v("网站优化从来不是一蹴而就，需要不断的去优化细节，不断的摸索尝试。从我的角度来看，其实优化更像是在网站性能和加载速度之间找到一个平衡点。譬如，文中我们为了优化文件打包大小，进行了大文件拆分。随之而来的问题就是拆分后的文件可能还会对某些文件有依赖，那么就影响到了关键渲染路径。")]),t._v(" "),s("p",[t._v("所以，优化不存在什么奇技淫巧，不断的去尝试，找到这个最佳优化点，这才是根本。")])])}),[],!1,null,null,null);a.default=e.exports}}]);